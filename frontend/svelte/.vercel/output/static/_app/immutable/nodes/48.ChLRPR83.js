import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as sn}from"../chunks/Y1pQyyvi.js";import{l as an,q as bt,r as ln,m as Ct,t as Lt,n as st,o as dn,a as d,y as O,s as U,v as B,z as A,H as Ve,C as Dt,w as S,B as q,x as un,E as He,u as H}from"../chunks/Ck91ypkQ.js";import{i as qt}from"../chunks/RujGBxXx.js";import{s as F}from"../chunks/B38bOHRo.js";import{s as D}from"../chunks/CNyBBxAM.js";import{b as cn}from"../chunks/J-1wTRcM.js";import{i as gn}from"../chunks/6tn_K0LM.js";import{s as fn,a as je}from"../chunks/DcXenzi0.js";import{g as hn,s as mn}from"../chunks/CIOq__Tp.js";import{g as vn}from"../chunks/Bc_wzfnz.js";import{a as Ke,g as Ft}from"../chunks/bzBAkz0U.js";import{l as pn,t as wn}from"../chunks/DxUIFzZ0.js";var at={},zt,Je;function xn(){return Je||(Je=1,zt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),zt}var Ut={},Y={},$e;function X(){if($e)return Y;$e=1;let o;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Y.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Y.getSymbolTotalCodewords=function(r){return i[r]},Y.getBCHDigit=function(s){let r=0;for(;s!==0;)r++,s>>>=1;return r},Y.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');o=r},Y.isKanjiModeEnabled=function(){return typeof o<"u"},Y.toSJIS=function(r){return o(r)},Y}var Vt={},Qe;function le(){return Qe||(Qe=1,function(o){o.L={bit:1},o.M={bit:0},o.Q={bit:3},o.H={bit:2};function i(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return o.L;case"m":case"medium":return o.M;case"q":case"quartile":return o.Q;case"h":case"high":return o.H;default:throw new Error("Unknown EC Level: "+s)}}o.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},o.from=function(r,t){if(o.isValid(r))return r;try{return i(r)}catch{return t}}}(Vt)),Vt}var Ht,Oe;function bn(){if(Oe)return Ht;Oe=1;function o(){this.buffer=[],this.length=0}return o.prototype={get:function(i){const s=Math.floor(i/8);return(this.buffer[s]>>>7-i%8&1)===1},put:function(i,s){for(let r=0;r<s;r++)this.putBit((i>>>s-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),i&&(this.buffer[s]|=128>>>this.length%8),this.length++}},Ht=o,Ht}var jt,Ye;function yn(){if(Ye)return jt;Ye=1;function o(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return o.prototype.set=function(i,s,r,t){const e=i*this.size+s;this.data[e]=r,t&&(this.reservedBit[e]=!0)},o.prototype.get=function(i,s){return this.data[i*this.size+s]},o.prototype.xor=function(i,s,r){this.data[i*this.size+s]^=r},o.prototype.isReserved=function(i,s){return this.reservedBit[i*this.size+s]},jt=o,jt}var Kt={},Ge;function Cn(){return Ge||(Ge=1,function(o){const i=X().getSymbolSize;o.getRowColCoords=function(r){if(r===1)return[];const t=Math.floor(r/7)+2,e=i(r),a=e===145?26:Math.ceil((e-13)/(2*t-2))*2,l=[e-7];for(let n=1;n<t-1;n++)l[n]=l[n-1]-a;return l.push(6),l.reverse()},o.getPositions=function(r){const t=[],e=o.getRowColCoords(r),a=e.length;for(let l=0;l<a;l++)for(let n=0;n<a;n++)l===0&&n===0||l===0&&n===a-1||l===a-1&&n===0||t.push([e[l],e[n]]);return t}}(Kt)),Kt}var Jt={},We;function _n(){if(We)return Jt;We=1;const o=X().getSymbolSize,i=7;return Jt.getPositions=function(r){const t=o(r);return[[0,0],[t-i,0],[0,t-i]]},Jt}var $t={},Ze;function En(){return Ze||(Ze=1,function(o){o.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};o.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},o.from=function(t){return o.isValid(t)?parseInt(t,10):void 0},o.getPenaltyN1=function(t){const e=t.size;let a=0,l=0,n=0,f=null,g=null;for(let m=0;m<e;m++){l=n=0,f=g=null;for(let b=0;b<e;b++){let h=t.get(m,b);h===f?l++:(l>=5&&(a+=i.N1+(l-5)),f=h,l=1),h=t.get(b,m),h===g?n++:(n>=5&&(a+=i.N1+(n-5)),g=h,n=1)}l>=5&&(a+=i.N1+(l-5)),n>=5&&(a+=i.N1+(n-5))}return a},o.getPenaltyN2=function(t){const e=t.size;let a=0;for(let l=0;l<e-1;l++)for(let n=0;n<e-1;n++){const f=t.get(l,n)+t.get(l,n+1)+t.get(l+1,n)+t.get(l+1,n+1);(f===4||f===0)&&a++}return a*i.N2},o.getPenaltyN3=function(t){const e=t.size;let a=0,l=0,n=0;for(let f=0;f<e;f++){l=n=0;for(let g=0;g<e;g++)l=l<<1&2047|t.get(f,g),g>=10&&(l===1488||l===93)&&a++,n=n<<1&2047|t.get(g,f),g>=10&&(n===1488||n===93)&&a++}return a*i.N3},o.getPenaltyN4=function(t){let e=0;const a=t.data.length;for(let n=0;n<a;n++)e+=t.data[n];return Math.abs(Math.ceil(e*100/a/5)-10)*i.N4};function s(r,t,e){switch(r){case o.Patterns.PATTERN000:return(t+e)%2===0;case o.Patterns.PATTERN001:return t%2===0;case o.Patterns.PATTERN010:return e%3===0;case o.Patterns.PATTERN011:return(t+e)%3===0;case o.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case o.Patterns.PATTERN101:return t*e%2+t*e%3===0;case o.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case o.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}o.applyMask=function(t,e){const a=e.size;for(let l=0;l<a;l++)for(let n=0;n<a;n++)e.isReserved(n,l)||e.xor(n,l,s(t,n,l))},o.getBestMask=function(t,e){const a=Object.keys(o.Patterns).length;let l=0,n=1/0;for(let f=0;f<a;f++){e(f),o.applyMask(f,t);const g=o.getPenaltyN1(t)+o.getPenaltyN2(t)+o.getPenaltyN3(t)+o.getPenaltyN4(t);o.applyMask(f,t),g<n&&(n=g,l=f)}return l}}($t)),$t}var yt={},Xe;function xr(){if(Xe)return yt;Xe=1;const o=le(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return yt.getBlocksCount=function(t,e){switch(e){case o.L:return i[(t-1)*4+0];case o.M:return i[(t-1)*4+1];case o.Q:return i[(t-1)*4+2];case o.H:return i[(t-1)*4+3];default:return}},yt.getTotalCodewordsCount=function(t,e){switch(e){case o.L:return s[(t-1)*4+0];case o.M:return s[(t-1)*4+1];case o.Q:return s[(t-1)*4+2];case o.H:return s[(t-1)*4+3];default:return}},yt}var Qt={},ct={},tr;function Bn(){if(tr)return ct;tr=1;const o=new Uint8Array(512),i=new Uint8Array(256);return function(){let r=1;for(let t=0;t<255;t++)o[t]=r,i[r]=t,r<<=1,r&256&&(r^=285);for(let t=255;t<512;t++)o[t]=o[t-255]}(),ct.log=function(r){if(r<1)throw new Error("log("+r+")");return i[r]},ct.exp=function(r){return o[r]},ct.mul=function(r,t){return r===0||t===0?0:o[i[r]+i[t]]},ct}var er;function An(){return er||(er=1,function(o){const i=Bn();o.mul=function(r,t){const e=new Uint8Array(r.length+t.length-1);for(let a=0;a<r.length;a++)for(let l=0;l<t.length;l++)e[a+l]^=i.mul(r[a],t[l]);return e},o.mod=function(r,t){let e=new Uint8Array(r);for(;e.length-t.length>=0;){const a=e[0];for(let n=0;n<t.length;n++)e[n]^=i.mul(t[n],a);let l=0;for(;l<e.length&&e[l]===0;)l++;e=e.slice(l)}return e},o.generateECPolynomial=function(r){let t=new Uint8Array([1]);for(let e=0;e<r;e++)t=o.mul(t,new Uint8Array([1,i.exp(e)]));return t}}(Qt)),Qt}var Ot,rr;function Rn(){if(rr)return Ot;rr=1;const o=An();function i(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(r){this.degree=r,this.genPoly=o.generateECPolynomial(this.degree)},i.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(r.length+this.degree);t.set(r);const e=o.mod(t,this.genPoly),a=this.degree-e.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(e,a),l}return e},Ot=i,Ot}var Yt={},Gt={},Wt={},nr;function br(){return nr||(nr=1,Wt.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),Wt}var K={},or;function yr(){if(or)return K;or=1;const o="[0-9]+",i="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;K.KANJI=new RegExp(s,"g"),K.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),K.BYTE=new RegExp(r,"g"),K.NUMERIC=new RegExp(o,"g"),K.ALPHANUMERIC=new RegExp(i,"g");const t=new RegExp("^"+s+"$"),e=new RegExp("^"+o+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return K.testKanji=function(n){return t.test(n)},K.testNumeric=function(n){return e.test(n)},K.testAlphanumeric=function(n){return a.test(n)},K}var ir;function tt(){return ir||(ir=1,function(o){const i=br(),s=yr();o.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},o.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},o.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},o.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},o.MIXED={bit:-1},o.getCharCountIndicator=function(e,a){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!i.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?e.ccBits[0]:a<27?e.ccBits[1]:e.ccBits[2]},o.getBestModeForData=function(e){return s.testNumeric(e)?o.NUMERIC:s.testAlphanumeric(e)?o.ALPHANUMERIC:s.testKanji(e)?o.KANJI:o.BYTE},o.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},o.isValid=function(e){return e&&e.bit&&e.ccBits};function r(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return o.NUMERIC;case"alphanumeric":return o.ALPHANUMERIC;case"kanji":return o.KANJI;case"byte":return o.BYTE;default:throw new Error("Unknown mode: "+t)}}o.from=function(e,a){if(o.isValid(e))return e;try{return r(e)}catch{return a}}}(Gt)),Gt}var sr;function Mn(){return sr||(sr=1,function(o){const i=X(),s=xr(),r=le(),t=tt(),e=br(),a=7973,l=i.getBCHDigit(a);function n(b,h,T){for(let N=1;N<=40;N++)if(h<=o.getCapacity(N,T,b))return N}function f(b,h){return t.getCharCountIndicator(b,h)+4}function g(b,h){let T=0;return b.forEach(function(N){const P=f(N.mode,h);T+=P+N.getBitsLength()}),T}function m(b,h){for(let T=1;T<=40;T++)if(g(b,T)<=o.getCapacity(T,h,t.MIXED))return T}o.from=function(h,T){return e.isValid(h)?parseInt(h,10):T},o.getCapacity=function(h,T,N){if(!e.isValid(h))throw new Error("Invalid QR Code version");typeof N>"u"&&(N=t.BYTE);const P=i.getSymbolTotalCodewords(h),R=s.getTotalCodewordsCount(h,T),I=(P-R)*8;if(N===t.MIXED)return I;const M=I-f(N,h);switch(N){case t.NUMERIC:return Math.floor(M/10*3);case t.ALPHANUMERIC:return Math.floor(M/11*2);case t.KANJI:return Math.floor(M/13);case t.BYTE:default:return Math.floor(M/8)}},o.getBestVersionForData=function(h,T){let N;const P=r.from(T,r.M);if(Array.isArray(h)){if(h.length>1)return m(h,P);if(h.length===0)return 1;N=h[0]}else N=h;return n(N.mode,N.getLength(),P)},o.getEncodedBits=function(h){if(!e.isValid(h)||h<7)throw new Error("Invalid QR Code version");let T=h<<12;for(;i.getBCHDigit(T)-l>=0;)T^=a<<i.getBCHDigit(T)-l;return h<<12|T}}(Yt)),Yt}var Zt={},ar;function Tn(){if(ar)return Zt;ar=1;const o=X(),i=1335,s=21522,r=o.getBCHDigit(i);return Zt.getEncodedBits=function(e,a){const l=e.bit<<3|a;let n=l<<10;for(;o.getBCHDigit(n)-r>=0;)n^=i<<o.getBCHDigit(n)-r;return(l<<10|n)^s},Zt}var Xt={},te,lr;function Nn(){if(lr)return te;lr=1;const o=tt();function i(s){this.mode=o.NUMERIC,this.data=s.toString()}return i.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(r){let t,e,a;for(t=0;t+3<=this.data.length;t+=3)e=this.data.substr(t,3),a=parseInt(e,10),r.put(a,10);const l=this.data.length-t;l>0&&(e=this.data.substr(t),a=parseInt(e,10),r.put(a,l*3+1))},te=i,te}var ee,dr;function In(){if(dr)return ee;dr=1;const o=tt(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(r){this.mode=o.ALPHANUMERIC,this.data=r}return s.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let a=i.indexOf(this.data[e])*45;a+=i.indexOf(this.data[e+1]),t.put(a,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},ee=s,ee}var re,ur;function Sn(){if(ur)return re;ur=1;const o=tt();function i(s){this.mode=o.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return i.getBitsLength=function(r){return r*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(s){for(let r=0,t=this.data.length;r<t;r++)s.put(this.data[r],8)},re=i,re}var ne,cr;function Pn(){if(cr)return ne;cr=1;const o=tt(),i=X();function s(r){this.mode=o.KANJI,this.data=r}return s.getBitsLength=function(t){return t*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let e=i.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),r.put(e,13)}},ne=s,ne}var oe={exports:{}},gr;function kn(){return gr||(gr=1,function(o){var i={single_source_shortest_paths:function(s,r,t){var e={},a={};a[r]=0;var l=i.PriorityQueue.make();l.push(r,0);for(var n,f,g,m,b,h,T,N,P;!l.empty();){n=l.pop(),f=n.value,m=n.cost,b=s[f]||{};for(g in b)b.hasOwnProperty(g)&&(h=b[g],T=m+h,N=a[g],P=typeof a[g]>"u",(P||N>T)&&(a[g]=T,l.push(g,T),e[g]=f))}if(typeof t<"u"&&typeof a[t]>"u"){var R=["Could not find a path from ",r," to ",t,"."].join("");throw new Error(R)}return e},extract_shortest_path_from_predecessor_list:function(s,r){for(var t=[],e=r;e;)t.push(e),s[e],e=s[e];return t.reverse(),t},find_path:function(s,r,t){var e=i.single_source_shortest_paths(s,r,t);return i.extract_shortest_path_from_predecessor_list(e,t)},PriorityQueue:{make:function(s){var r=i.PriorityQueue,t={},e;s=s||{};for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t.queue=[],t.sorter=s.sorter||r.default_sorter,t},default_sorter:function(s,r){return s.cost-r.cost},push:function(s,r){var t={value:s,cost:r};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};o.exports=i}(oe)),oe.exports}var fr;function Ln(){return fr||(fr=1,function(o){const i=tt(),s=Nn(),r=In(),t=Sn(),e=Pn(),a=yr(),l=X(),n=kn();function f(R){return unescape(encodeURIComponent(R)).length}function g(R,I,M){const _=[];let k;for(;(k=R.exec(M))!==null;)_.push({data:k[0],index:k.index,mode:I,length:k[0].length});return _}function m(R){const I=g(a.NUMERIC,i.NUMERIC,R),M=g(a.ALPHANUMERIC,i.ALPHANUMERIC,R);let _,k;return l.isKanjiModeEnabled()?(_=g(a.BYTE,i.BYTE,R),k=g(a.KANJI,i.KANJI,R)):(_=g(a.BYTE_KANJI,i.BYTE,R),k=[]),I.concat(M,_,k).sort(function(E,C){return E.index-C.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function b(R,I){switch(I){case i.NUMERIC:return s.getBitsLength(R);case i.ALPHANUMERIC:return r.getBitsLength(R);case i.KANJI:return e.getBitsLength(R);case i.BYTE:return t.getBitsLength(R)}}function h(R){return R.reduce(function(I,M){const _=I.length-1>=0?I[I.length-1]:null;return _&&_.mode===M.mode?(I[I.length-1].data+=M.data,I):(I.push(M),I)},[])}function T(R){const I=[];for(let M=0;M<R.length;M++){const _=R[M];switch(_.mode){case i.NUMERIC:I.push([_,{data:_.data,mode:i.ALPHANUMERIC,length:_.length},{data:_.data,mode:i.BYTE,length:_.length}]);break;case i.ALPHANUMERIC:I.push([_,{data:_.data,mode:i.BYTE,length:_.length}]);break;case i.KANJI:I.push([_,{data:_.data,mode:i.BYTE,length:f(_.data)}]);break;case i.BYTE:I.push([{data:_.data,mode:i.BYTE,length:f(_.data)}])}}return I}function N(R,I){const M={},_={start:{}};let k=["start"];for(let x=0;x<R.length;x++){const E=R[x],C=[];for(let w=0;w<E.length;w++){const u=E[w],c=""+x+w;C.push(c),M[c]={node:u,lastCount:0},_[c]={};for(let v=0;v<k.length;v++){const p=k[v];M[p]&&M[p].node.mode===u.mode?(_[p][c]=b(M[p].lastCount+u.length,u.mode)-b(M[p].lastCount,u.mode),M[p].lastCount+=u.length):(M[p]&&(M[p].lastCount=u.length),_[p][c]=b(u.length,u.mode)+4+i.getCharCountIndicator(u.mode,I))}}k=C}for(let x=0;x<k.length;x++)_[k[x]].end=0;return{map:_,table:M}}function P(R,I){let M;const _=i.getBestModeForData(R);if(M=i.from(I,_),M!==i.BYTE&&M.bit<_.bit)throw new Error('"'+R+'" cannot be encoded with mode '+i.toString(M)+`.
 Suggested mode is: `+i.toString(_));switch(M===i.KANJI&&!l.isKanjiModeEnabled()&&(M=i.BYTE),M){case i.NUMERIC:return new s(R);case i.ALPHANUMERIC:return new r(R);case i.KANJI:return new e(R);case i.BYTE:return new t(R)}}o.fromArray=function(I){return I.reduce(function(M,_){return typeof _=="string"?M.push(P(_,null)):_.data&&M.push(P(_.data,_.mode)),M},[])},o.fromString=function(I,M){const _=m(I,l.isKanjiModeEnabled()),k=T(_),x=N(k,M),E=n.find_path(x.map,"start","end"),C=[];for(let w=1;w<E.length-1;w++)C.push(x.table[E[w]].node);return o.fromArray(h(C))},o.rawSplit=function(I){return o.fromArray(m(I,l.isKanjiModeEnabled()))}}(Xt)),Xt}var hr;function Dn(){if(hr)return Ut;hr=1;const o=X(),i=le(),s=bn(),r=yn(),t=Cn(),e=_n(),a=En(),l=xr(),n=Rn(),f=Mn(),g=Tn(),m=tt(),b=Ln();function h(x,E){const C=x.size,w=e.getPositions(E);for(let u=0;u<w.length;u++){const c=w[u][0],v=w[u][1];for(let p=-1;p<=7;p++)if(!(c+p<=-1||C<=c+p))for(let y=-1;y<=7;y++)v+y<=-1||C<=v+y||(p>=0&&p<=6&&(y===0||y===6)||y>=0&&y<=6&&(p===0||p===6)||p>=2&&p<=4&&y>=2&&y<=4?x.set(c+p,v+y,!0,!0):x.set(c+p,v+y,!1,!0))}}function T(x){const E=x.size;for(let C=8;C<E-8;C++){const w=C%2===0;x.set(C,6,w,!0),x.set(6,C,w,!0)}}function N(x,E){const C=t.getPositions(E);for(let w=0;w<C.length;w++){const u=C[w][0],c=C[w][1];for(let v=-2;v<=2;v++)for(let p=-2;p<=2;p++)v===-2||v===2||p===-2||p===2||v===0&&p===0?x.set(u+v,c+p,!0,!0):x.set(u+v,c+p,!1,!0)}}function P(x,E){const C=x.size,w=f.getEncodedBits(E);let u,c,v;for(let p=0;p<18;p++)u=Math.floor(p/3),c=p%3+C-8-3,v=(w>>p&1)===1,x.set(u,c,v,!0),x.set(c,u,v,!0)}function R(x,E,C){const w=x.size,u=g.getEncodedBits(E,C);let c,v;for(c=0;c<15;c++)v=(u>>c&1)===1,c<6?x.set(c,8,v,!0):c<8?x.set(c+1,8,v,!0):x.set(w-15+c,8,v,!0),c<8?x.set(8,w-c-1,v,!0):c<9?x.set(8,15-c-1+1,v,!0):x.set(8,15-c-1,v,!0);x.set(w-8,8,1,!0)}function I(x,E){const C=x.size;let w=-1,u=C-1,c=7,v=0;for(let p=C-1;p>0;p-=2)for(p===6&&p--;;){for(let y=0;y<2;y++)if(!x.isReserved(u,p-y)){let L=!1;v<E.length&&(L=(E[v]>>>c&1)===1),x.set(u,p-y,L),c--,c===-1&&(v++,c=7)}if(u+=w,u<0||C<=u){u-=w,w=-w;break}}}function M(x,E,C){const w=new s;C.forEach(function(y){w.put(y.mode.bit,4),w.put(y.getLength(),m.getCharCountIndicator(y.mode,x)),y.write(w)});const u=o.getSymbolTotalCodewords(x),c=l.getTotalCodewordsCount(x,E),v=(u-c)*8;for(w.getLengthInBits()+4<=v&&w.put(0,4);w.getLengthInBits()%8!==0;)w.putBit(0);const p=(v-w.getLengthInBits())/8;for(let y=0;y<p;y++)w.put(y%2?17:236,8);return _(w,x,E)}function _(x,E,C){const w=o.getSymbolTotalCodewords(E),u=l.getTotalCodewordsCount(E,C),c=w-u,v=l.getBlocksCount(E,C),p=w%v,y=v-p,L=Math.floor(w/v),z=Math.floor(c/v),G=z+1,et=L-z,W=new n(et);let rt=0;const $=new Array(v),nt=new Array(v);let Q=0;const gt=new Uint8Array(x.buffer);for(let J=0;J<v;J++){const it=J<y?z:G;$[J]=gt.slice(rt,rt+it),nt[J]=W.encode($[J]),rt+=it,Q=Math.max(Q,it)}const Z=new Uint8Array(w);let ot=0,j,V;for(j=0;j<Q;j++)for(V=0;V<v;V++)j<$[V].length&&(Z[ot++]=$[V][j]);for(j=0;j<et;j++)for(V=0;V<v;V++)Z[ot++]=nt[V][j];return Z}function k(x,E,C,w){let u;if(Array.isArray(x))u=b.fromArray(x);else if(typeof x=="string"){let L=E;if(!L){const z=b.rawSplit(x);L=f.getBestVersionForData(z,C)}u=b.fromString(x,L||40)}else throw new Error("Invalid data");const c=f.getBestVersionForData(u,C);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=c;else if(E<c)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+c+`.
`);const v=M(E,C,u),p=o.getSymbolSize(E),y=new r(p);return h(y,E),T(y),N(y,E),R(y,C,0),E>=7&&P(y,E),I(y,v),isNaN(w)&&(w=a.getBestMask(y,R.bind(null,y,C))),a.applyMask(w,y),R(y,C,w),{modules:y,version:E,errorCorrectionLevel:C,maskPattern:w,segments:u}}return Ut.create=function(E,C){if(typeof E>"u"||E==="")throw new Error("No input text");let w=i.M,u,c;return typeof C<"u"&&(w=i.from(C.errorCorrectionLevel,i.M),u=f.from(C.version),c=a.from(C.maskPattern),C.toSJISFunc&&o.setToSJISFunction(C.toSJISFunc)),k(E,u,w,c)},Ut}var ie={},se={},mr;function Cr(){return mr||(mr=1,function(o){function i(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let r=s.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+s);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(e){return[e,e]}))),r.length===6&&r.push("F","F");const t=parseInt(r.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+r.slice(0,6).join("")}}o.getOptions=function(r){r||(r={}),r.color||(r.color={});const t=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,e=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:e,scale:e?4:a,margin:t,color:{dark:i(r.color.dark||"#000000ff"),light:i(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},o.getScale=function(r,t){return t.width&&t.width>=r+t.margin*2?t.width/(r+t.margin*2):t.scale},o.getImageWidth=function(r,t){const e=o.getScale(r,t);return Math.floor((r+t.margin*2)*e)},o.qrToImageData=function(r,t,e){const a=t.modules.size,l=t.modules.data,n=o.getScale(a,e),f=Math.floor((a+e.margin*2)*n),g=e.margin*n,m=[e.color.light,e.color.dark];for(let b=0;b<f;b++)for(let h=0;h<f;h++){let T=(b*f+h)*4,N=e.color.light;if(b>=g&&h>=g&&b<f-g&&h<f-g){const P=Math.floor((b-g)/n),R=Math.floor((h-g)/n);N=m[l[P*a+R]?1:0]}r[T++]=N.r,r[T++]=N.g,r[T++]=N.b,r[T]=N.a}}}(se)),se}var vr;function qn(){return vr||(vr=1,function(o){const i=Cr();function s(t,e,a){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=a,e.width=a,e.style.height=a+"px",e.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}o.render=function(e,a,l){let n=l,f=a;typeof n>"u"&&(!a||!a.getContext)&&(n=a,a=void 0),a||(f=r()),n=i.getOptions(n);const g=i.getImageWidth(e.modules.size,n),m=f.getContext("2d"),b=m.createImageData(g,g);return i.qrToImageData(b.data,e,n),s(m,f,g),m.putImageData(b,0,0),f},o.renderToDataURL=function(e,a,l){let n=l;typeof n>"u"&&(!a||!a.getContext)&&(n=a,a=void 0),n||(n={});const f=o.render(e,a,n),g=n.type||"image/png",m=n.rendererOpts||{};return f.toDataURL(g,m.quality)}}(ie)),ie}var ae={},pr;function Fn(){if(pr)return ae;pr=1;const o=Cr();function i(t,e){const a=t.a/255,l=e+'="'+t.hex+'"';return a<1?l+" "+e+'-opacity="'+a.toFixed(2).slice(1)+'"':l}function s(t,e,a){let l=t+e;return typeof a<"u"&&(l+=" "+a),l}function r(t,e,a){let l="",n=0,f=!1,g=0;for(let m=0;m<t.length;m++){const b=Math.floor(m%e),h=Math.floor(m/e);!b&&!f&&(f=!0),t[m]?(g++,m>0&&b>0&&t[m-1]||(l+=f?s("M",b+a,.5+h+a):s("m",n,0),n=0,f=!1),b+1<e&&t[m+1]||(l+=s("h",g),g=0)):n++}return l}return ae.render=function(e,a,l){const n=o.getOptions(a),f=e.modules.size,g=e.modules.data,m=f+n.margin*2,b=n.color.light.a?"<path "+i(n.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",h="<path "+i(n.color.dark,"stroke")+' d="'+r(g,f,n.margin)+'"/>',T='viewBox="0 0 '+m+" "+m+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+T+' shape-rendering="crispEdges">'+b+h+`</svg>
`;return typeof l=="function"&&l(null,P),P},ae}var wr;function zn(){if(wr)return at;wr=1;const o=xn(),i=Dn(),s=qn(),r=Fn();function t(e,a,l,n,f){const g=[].slice.call(arguments,1),m=g.length,b=typeof g[m-1]=="function";if(!b&&!o())throw new Error("Callback required as last argument");if(b){if(m<2)throw new Error("Too few arguments provided");m===2?(f=l,l=a,a=n=void 0):m===3&&(a.getContext&&typeof f>"u"?(f=n,n=void 0):(f=n,n=l,l=a,a=void 0))}else{if(m<1)throw new Error("Too few arguments provided");return m===1?(l=a,a=n=void 0):m===2&&!a.getContext&&(n=l,l=a,a=void 0),new Promise(function(h,T){try{const N=i.create(l,n);h(e(N,a,n))}catch(N){T(N)}})}try{const h=i.create(l,n);f(null,e(h,a,n))}catch(h){f(h)}}return at.create=i.create,at.toCanvas=t.bind(null,s.render),at.toDataURL=t.bind(null,s.renderToDataURL),at.toString=t.bind(null,function(e,a,l){return r.render(e,l)}),at}var Un=zn();const Vn=hn(Un);var Hn=Ct('<div class="flex justify-center items-center h-64 svelte-108zud2"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div></div>'),jn=Ct('<div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center"><p class="text-red-600"> </p> <button class="mt-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">Try Again</button></div>'),Kn=Ct('<div class="relative mb-6 sm:mb-8 lg:mb-12"><div class="w-full h-64 sm:h-80 md:h-96 lg:h-[28rem] xl:h-[32rem] rounded-3xl shadow-2xl relative overflow-hidden transform hover:scale-[1.02] transition-all duration-500"><div class="absolute top-0 left-0 w-16 h-16"><div class="absolute inset-0 rounded-tl-3xl bg-gradient-to-br from-white/30 to-transparent"></div> <div class="absolute top-1 left-1 w-4 h-4 rounded-tl-2xl bg-white/20 shadow-inner"></div></div> <div class="absolute top-0 right-0 w-16 h-16"><div class="absolute inset-0 rounded-tr-3xl bg-gradient-to-bl from-white/30 to-transparent"></div> <div class="absolute top-1 right-1 w-4 h-4 rounded-tr-2xl bg-white/20 shadow-inner"></div></div> <div class="absolute bottom-0 left-0 w-16 h-16"><div class="absolute inset-0 rounded-bl-3xl bg-gradient-to-tr from-white/20 to-transparent"></div> <div class="absolute bottom-1 left-1 w-4 h-4 rounded-bl-2xl bg-white/15 shadow-inner"></div></div> <div class="absolute bottom-0 right-0 w-16 h-16"><div class="absolute inset-0 rounded-br-3xl bg-gradient-to-tl from-white/20 to-transparent"></div> <div class="absolute bottom-1 right-1 w-4 h-4 rounded-br-2xl bg-white/15 shadow-inner"></div></div> <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent animate-pulse"></div> <div class="absolute top-4 right-8 w-16 h-16 bg-white/5 rounded-full blur-sm"></div> <div class="absolute bottom-6 left-8 w-12 h-12 bg-white/10 rounded-full"></div> <div class="absolute top-1/3 right-1/4 w-8 h-8 bg-white/5 rounded-full blur-xl"></div> <div class="absolute top-2/3 left-1/4 w-6 h-6 bg-white/10 rounded-full"></div> <svg class="absolute inset-0 w-full h-full opacity-10" viewBox="0 0 400 300" fill="none"><path d="M0,150 Q100,50 200,150 T400,150" stroke="white" stroke-width="2" fill="none"></path><path d="M0,200 Q150,100 300,200 T600,200" stroke="white" stroke-width="1.5" fill="none"></path><path d="M-100,100 Q50,0 200,100 T500,100" stroke="white" stroke-width="1" fill="none"></path></svg> <div><div class="flex justify-between items-start svelte-108zud2"><div class="flex flex-col space-y-2 sm:space-y-3 md:space-y-4 lg:space-y-5 svelte-108zud2"><div class="bg-white/90 backdrop-blur-sm rounded-xl p-2 sm:p-3 md:p-4 lg:p-5 shadow-lg flex items-center justify-between svelte-108zud2"><img src="/logo.png" alt="Brand Logo" class="h-10 sm:h-16 md:h-20 lg:h-24 xl:h-28 w-auto"/> <div class="ml-2 sm:ml-4 md:ml-6 lg:ml-8 flex items-center justify-center w-8 sm:w-12 md:w-14 lg:w-16 h-6 sm:h-8 md:h-10 lg:h-12 bg-gradient-to-b from-yellow-300 to-yellow-500 rounded-md shadow-inner border border-yellow-600 relative svelte-108zud2"><div class="grid grid-cols-3 gap-0.5 sm:gap-1 md:gap-1.5 w-5 sm:w-8 md:w-10 lg:w-12 h-4 sm:h-6 md:h-7 lg:h-8"><div class="bg-yellow-800 rounded-sm"></div> <div class="bg-yellow-800 rounded-sm"></div> <div class="bg-yellow-800 rounded-sm"></div> <div class="bg-yellow-800 rounded-sm"></div> <div class="bg-yellow-800 rounded-sm"></div> <div class="bg-yellow-800 rounded-sm"></div></div> <div class="absolute inset-0 bg-gradient-to-br from-white/30 to-transparent rounded-md"></div></div></div> <div class="flex items-center space-x-2 sm:space-x-3 md:space-x-4 svelte-108zud2"><div><svg fill="currentColor" viewBox="0 0 20 20"><path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path><path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"></path></svg></div> <span> </span></div> <div class="space-y-1 md:space-y-2"><div> </div> <div> </div></div></div> <div class="flex flex-col items-end space-y-2 sm:space-y-3 md:space-y-4 lg:space-y-5 svelte-108zud2"><div class="bg-gradient-to-r from-yellow-400 to-yellow-500 text-gray-900 px-2 sm:px-4 md:px-5 lg:px-6 py-1 sm:py-2 md:py-2.5 lg:py-3 rounded-full text-xs sm:text-sm md:text-base lg:text-lg font-bold shadow-lg"> </div> <div class="relative"><div class="relative backdrop-blur-sm p-2 sm:p-3 md:p-4 lg:p-5 rounded-2xl shadow-2xl border"><div class="absolute top-1 left-1 w-2 h-2 md:w-3 md:h-3 lg:w-4 lg:h-4 border-l-2 border-t-2 rounded-tl"></div> <div class="absolute top-1 right-1 w-2 h-2 md:w-3 md:h-3 lg:w-4 lg:h-4 border-r-2 border-t-2 rounded-tr"></div> <div class="absolute bottom-1 left-1 w-2 h-2 md:w-3 md:h-3 lg:w-4 lg:h-4 border-l-2 border-b-2 rounded-bl"></div> <div class="absolute bottom-1 right-1 w-2 h-2 md:w-3 md:h-3 lg:w-4 lg:h-4 border-r-2 border-b-2 rounded-br"></div> <canvas class="block relative z-10 w-16 sm:w-24 md:w-28 lg:w-32 xl:w-36 h-16 sm:h-24 md:h-28 lg:h-32 xl:h-36"></canvas></div> <div class="absolute inset-0 bg-gradient-to-r from-blue-400/20 to-purple-400/20 rounded-2xl blur-xl -z-10"></div></div></div></div> <div class="flex-grow"></div> <div class="flex justify-between items-end svelte-108zud2"><div class="space-y-1 md:space-y-2"><div class="flex items-center space-x-1 sm:space-x-2 md:space-x-3 svelte-108zud2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> <span> </span></div> <div><div> </div> <div> </div></div></div> <div class="text-right space-y-1 md:space-y-2"><div> </div> <div> </div></div></div></div> <div class="absolute inset-0 bg-gradient-to-r from-transparent to-transparent transform -skew-x-12 translate-x-full animate-pulse" style="background: linear-gradient(to right, transparent, rgba(255,255,255,0.05), transparent);"></div></div></div> <div class="backdrop-blur-sm p-4 sm:p-6 md:p-8 lg:p-10 xl:p-12 rounded-2xl shadow-xl border" style="background: rgba(255,255,255,0.7); border-color: rgba(255,255,255,0.2);"><div class="flex items-center gap-3 sm:gap-4 md:gap-5 lg:gap-6 mb-4 sm:mb-6 md:mb-8 svelte-108zud2"><div class="w-6 sm:w-8 md:w-10 lg:w-12 xl:w-14 h-6 sm:h-8 md:h-10 lg:h-12 xl:h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center svelte-108zud2"><svg class="w-3 sm:w-4 md:w-5 lg:w-6 xl:w-7 h-3 sm:h-4 md:h-5 lg:h-6 xl:h-7 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <h3> </h3></div> <div class="grid gap-3 sm:gap-4 md:gap-5 lg:gap-6 xl:gap-8"><div><div class="w-8 sm:w-12 md:w-14 lg:w-16 xl:w-20 h-8 sm:h-12 md:h-14 lg:h-16 xl:h-20 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full flex items-center justify-center font-bold shadow-lg text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl svelte-108zud2">1</div> <div class="flex-1"><p class="font-semibold text-gray-800 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl"> </p> <p class="text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl text-gray-600 mt-1 md:mt-2"> </p></div></div> <div><div class="w-8 sm:w-12 md:w-14 lg:w-16 xl:w-20 h-8 sm:h-12 md:h-14 lg:h-16 xl:h-20 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-full flex items-center justify-center font-bold shadow-lg text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl svelte-108zud2">2</div> <div class="flex-1"><p class="font-semibold text-gray-800 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl"> </p> <p class="text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl text-gray-600 mt-1 md:mt-2"> </p></div></div> <div><div class="w-8 sm:w-12 md:w-14 lg:w-16 xl:w-20 h-8 sm:h-12 md:h-14 lg:h-16 xl:h-20 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-full flex items-center justify-center font-bold shadow-lg text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl svelte-108zud2">3</div> <div class="flex-1"><p class="font-semibold text-gray-800 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl"> </p> <p class="text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl text-gray-600 mt-1 md:mt-2"> </p></div></div></div></div>',1),Jn=Ct('<div><div class="max-w-md sm:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto"><!></div></div>');function so(o,i){an(i,!1);const[s,r]=fn(),t=()=>je(pn,"$language",s),e=()=>je(wn,"$t",s),a=O(),l=O(),n=O();let f=O(),g=O(null),m=O(null),b=O(!0),h=O("");async function T(){try{if(U(b,!0),U(h,""),typeof window>"u"){U(b,!1);return}const u=JSON.parse(localStorage.getItem("loyaltyUser")||"{}");if(console.log("üîç Virtual Card: Current user from localStorage:",u),!u.mobile){U(h,"No user found. Please login again."),console.log("‚ùå Virtual Card: No mobile found in localStorage"),vn("/login");return}console.log("üîç Virtual Card: Fetching customer data for mobile:",u.mobile);const{data:c,error:v}=await mn.from("customers").select(`
          *,
          customer_cards (
            card_number
          ),
          card_types (
            name,
            name_ar,
            color,
            point_limit
          )
        `).eq("customer_code",u.mobile).single();if(v){console.error("‚ùå Virtual Card: Error fetching customer:",v),U(h,`Failed to load customer data: ${v.message}`);return}if(!c){console.log("‚ùå Virtual Card: No customer found for mobile:",u.mobile),U(h,"Customer not found. Please contact support.");return}console.log("‚úÖ Virtual Card: Customer data loaded:",c),U(g,c),c.card_types?U(m,c.card_types):U(m,{name:c.card_type||"bronze",name_ar:c.card_type||"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",color:c.card_type==="gold"?"#FFD700":c.card_type==="silver"?"#C0C0C0":"#CD7F32",point_limit:c.card_type==="gold"?5e3:c.card_type==="silver"?2500:1e3}),U(h,"")}catch(u){console.error("üí• Virtual Card: Unexpected error:",u),U(h,`Unexpected error: ${u}`)}finally{U(b,!1),console.log("üèÅ Virtual Card: Loading completed. Error:",d(h))}}function N(u,c){const v=parseInt(u.replace("#",""),16),p=Math.round(2.55*c),y=(v>>16)+p,L=(v>>8&255)+p,z=(v&255)+p;return"#"+(16777216+(y<255?y<1?0:y:255)*65536+(L<255?L<1?0:L:255)*256+(z<255?z<1?0:z:255)).toString(16).slice(1)}function P(u){const c=u.replace("#",""),v=parseInt(c.substr(0,2),16),p=parseInt(c.substr(2,2),16),y=parseInt(c.substr(4,2),16);return u.toLowerCase()==="#ffd700"||v>200&&p>180&&y<100?"gold":(.299*v+.587*p+.114*y)/255>.5?"dark":"light"}function R(u){if(!u)return"N/A";try{const c=new Date(u),v=c.getDate().toString().padStart(2,"0"),p=(c.getMonth()+1).toString().padStart(2,"0"),y=c.getFullYear();return`${v}/${p}/${y}`}catch{return"N/A"}}function I(u){return R(u)}sn(()=>{T()});async function M(){if(d(f)&&d(g))try{const u=d(g).customer_cards?.[0]?.card_number||d(g).customer_code||d(g).customer;console.log("üîç Generating QR code for:",u);const v=window.innerWidth<640?80:120;await Vn.toCanvas(d(f),u,{width:v,margin:1,color:{dark:d(a),light:"#ffffff"},errorCorrectionLevel:"H"})}catch(u){console.error("Error generating QR code:",u)}}bt(()=>(d(m),Ke),()=>{U(a,d(m)&&d(m).color?d(m).color:Ke(d(m)?.name||"Gold"))}),bt(()=>(d(m),Ft),()=>{U(l,(()=>{if(d(m)&&d(m).color){const u=d(m).color;return{from:u,to:N(u,-20)}}return d(m)?Ft(d(m).name):Ft("Gold")})())}),bt(()=>d(a),()=>{U(n,P(d(a)))}),bt(()=>(d(g),d(f)),()=>{d(g)&&d(f)&&M()}),ln(),gn();var _=Jn();let k;var x=B(_),E=B(x);{var C=u=>{var c=Hn();st(u,c)},w=u=>{var c=Ve(),v=Dt(c);{var p=L=>{var z=jn(),G=B(z),et=B(G,!0);A(G);var W=S(G,2);A(z),Lt(()=>q(et,d(h))),un("click",W,T),st(L,z)},y=L=>{var z=Ve(),G=Dt(z);{var et=W=>{var rt=Kn(),$=Dt(rt),nt=B($),Q=S(B(nt),20);let gt;var Z=B(Q),ot=B(Z),j=S(B(ot),2),V=B(j);let J;var it=B(V);let de;A(V);var ft=S(V,2);let ue;var _r=B(ft,!0);A(ft),A(j);var ce=S(j,2),lt=B(ce);let ge;var Er=B(lt,!0);A(lt);var ht=S(lt,2);let fe;var Br=B(ht,!0);A(ht),A(ce),A(ot);var he=S(ot,2),_t=B(he),Ar=B(_t,!0);A(_t);var me=S(_t,2),Et=B(me),ve=B(Et),pe=S(ve,2),we=S(pe,2),xe=S(we,2),Rr=S(xe,2);cn(Rr,kt=>U(f,kt),()=>d(f)),A(Et),He(2),A(me),A(he),A(Z);var be=S(Z,4),Bt=B(be),At=B(Bt),Rt=B(At);let ye;var mt=S(Rt,2);let Ce;var Mr=B(mt,!0);A(mt),A(At);var _e=S(At,2),dt=B(_e);let Ee;var Tr=B(dt,!0);A(dt);var vt=S(dt,2);let Be;var Nr=B(vt,!0);A(vt),A(_e),A(Bt);var Ae=S(Bt,2),ut=B(Ae);let Re;var Ir=B(ut,!0);A(ut);var pt=S(ut,2);let Me;var Sr=B(pt,!0);A(pt),A(Ae),A(be),A(Q),He(2),A(nt),A($);var Te=S($,2),Mt=B(Te),Tt=S(B(Mt),2);let Ne;var Pr=B(Tt,!0);A(Tt),A(Mt);var Ie=S(Mt,2),wt=B(Ie);let Se;var Pe=S(B(wt),2),Nt=B(Pe),kr=B(Nt,!0);A(Nt);var ke=S(Nt,2),Lr=B(ke,!0);A(ke),A(Pe),A(wt);var xt=S(wt,2);let Le;var De=S(B(xt),2),It=B(De),Dr=B(It,!0);A(It);var qe=S(It,2),qr=B(qe,!0);A(qe),A(De),A(xt);var St=S(xt,2);let Fe;var ze=S(B(St),2),Pt=B(ze),Fr=B(Pt,!0);A(Pt);var Ue=S(Pt,2),zr=B(Ue,!0);A(Ue),A(ze),A(St),A(Ie),A(Te),Lt((kt,Ur,Vr,Hr,jr,Kr,Jr,$r,Qr,Or,Yr,Gr,Wr,Zr,Xr,tn,en,rn,nn,on)=>{D(nt,`background: linear-gradient(135deg, ${d(l),H(()=>d(l).from)??""}, ${d(a)??""}, ${d(l),H(()=>d(l).to)??""})`),gt=F(Q,1,"relative h-full p-3 sm:p-6 md:p-8 lg:p-10 xl:p-12 flex flex-col svelte-108zud2",null,gt,kt),D(Q,d(n)==="gold"?"color: #1A1A1A;":""),J=F(V,1,"w-8 sm:w-10 md:w-12 lg:w-14 h-6 sm:h-7 md:h-8 lg:h-10 rounded-md flex items-center justify-center svelte-108zud2",null,J,Ur),D(V,d(n)==="gold"?"background: rgba(26,26,26,0.15);":d(n)==="dark"?"background: rgba(31, 41, 55, 0.2);":""),de=F(it,0,"w-4 sm:w-5 md:w-6 lg:w-7 h-4 sm:h-5 md:h-6 lg:h-7",null,de,Vr),D(it,d(n)==="gold"?"color: #1A0F08;":""),ue=F(ft,1,"text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-mono tracking-wider font-semibold",null,ue,Hr),D(ft,d(n)==="gold"?"color: #1A0F08; text-shadow: 1px 1px 2px rgba(255,255,255,0.3);":""),q(_r,(d(g),H(()=>d(g)?.customer_cards?.[0]?.card_number||d(g)?.customer_code||"N/A"))),ge=F(lt,1,"text-xs md:text-sm lg:text-base uppercase tracking-wider font-medium",null,ge,jr),D(lt,d(n)==="gold"?"color: #2D1810; font-weight: 600;":""),q(Er,(e(),H(()=>e().cardHolder||"Cardholder"))),fe=F(ht,1,"font-bold text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl drop-shadow-md",null,fe,Kr),D(ht,d(n)==="gold"?"color: #1A0F08; text-shadow: 1px 1px 2px rgba(255,255,255,0.3);":""),q(Br,Jr),q(Ar,$r),D(Et,d(n)==="gold"?"background: rgba(255,255,255,0.95); border-color: #999999;":"background: rgba(255,255,255,0.95); border-color: rgba(255,255,255,0.2);"),D(ve,`border-color: ${d(a)??""}`),D(pe,`border-color: ${d(a)??""}`),D(we,`border-color: ${d(a)??""}`),D(xe,`border-color: ${d(a)??""}`),ye=F(Rt,0,"w-3 sm:w-4 md:w-5 lg:w-6 h-3 sm:h-4 md:h-5 lg:h-6 drop-shadow-sm",null,ye,Qr),D(Rt,d(n)==="gold"?"color: #1A0F08;":""),Ce=F(mt,1,"text-xs sm:text-sm md:text-base lg:text-lg font-semibold drop-shadow-sm",null,Ce,Or),D(mt,d(n)==="gold"?"color: #1A0F08; text-shadow: 1px 1px 2px rgba(255,255,255,0.4);":""),q(Mr,(e(),H(()=>e().premiumMember||"Premium Member"))),Ee=F(dt,1,"text-xs md:text-sm lg:text-base uppercase tracking-wider font-medium",null,Ee,Yr),D(dt,d(n)==="gold"?"color: #2D1810; font-weight: 600;":""),q(Tr,(e(),H(()=>e().memberSince||"Member Since"))),Be=F(vt,1,"font-semibold text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl",null,Be,Gr),D(vt,d(n)==="gold"?"color: #1A0F08; text-shadow: 1px 1px 2px rgba(255,255,255,0.3);":""),q(Nr,Wr),Re=F(ut,1,"text-xs md:text-sm lg:text-base uppercase tracking-wider font-medium",null,Re,Zr),D(ut,d(n)==="gold"?"color: #2D1810; font-weight: 600;":""),q(Ir,(e(),H(()=>e().validUntil||"Valid Until"))),Me=F(pt,1,"font-bold text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl drop-shadow-sm",null,Me,Xr),D(pt,d(n)==="gold"?"color: #1A0F08; text-shadow: 1px 1px 2px rgba(255,255,255,0.3);":""),q(Sr,tn),Ne=F(Tt,1,"font-bold text-gray-800 text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl",null,Ne,en),q(Pr,(e(),H(()=>e().howToUse||"How to use:"))),Se=F(wt,1,"flex items-center gap-3 sm:gap-4 md:gap-5 lg:gap-6 xl:gap-8 p-3 sm:p-4 md:p-5 lg:p-6 xl:p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100 svelte-108zud2",null,Se,rn),q(kr,(e(),H(()=>e().showQR||"Show QR code to cashier"))),q(Lr,t()==="ar"?"ÿßÿπÿ±ÿ∂ ÿ±ŸÖÿ≤ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿ≥ÿ±Ÿäÿπÿ© ÿπŸÜÿØ ÿßŸÑÿØŸÅÿπ":"Present your QR code at checkout"),Le=F(xt,1,"flex items-center gap-3 sm:gap-4 md:gap-5 lg:gap-6 xl:gap-8 p-3 sm:p-4 md:p-5 lg:p-6 xl:p-8 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 svelte-108zud2",null,Le,nn),q(Dr,(e(),H(()=>e().earnPoints||"Earn points on every purchase"))),q(qr,t()==="ar"?"ÿßÿ¨ŸÖÿπ ÿßŸÑŸÜŸÇÿßÿ∑ ŸÖÿπ ŸÉŸÑ ÿπŸÖŸÑŸäÿ© ÿ¥ÿ±ÿßÿ°":"Collect points with every purchase"),Fe=F(St,1,"flex items-center gap-3 sm:gap-4 md:gap-5 lg:gap-6 xl:gap-8 p-3 sm:p-4 md:p-5 lg:p-6 xl:p-8 bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl border border-purple-100 svelte-108zud2",null,Fe,on),q(Fr,(e(),H(()=>e().redeemPoints||"Redeem points for rewards"))),q(zr,t()==="ar"?"ÿßÿ≥ÿ™ÿ®ÿØŸÑ ÿßŸÑŸÜŸÇÿßÿ∑ ÿ®ÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™ ÿßŸÑÿ≠ÿµÿ±Ÿäÿ©":"Exchange points for exclusive rewards")},[()=>({"text-white":d(n)==="light","text-gray-900":d(n)==="dark"}),()=>({"bg-white":d(n)==="light","opacity-20":d(n)==="light","bg-gray-800":d(n)==="dark"}),()=>({"text-white":d(n)==="light","text-gray-800":d(n)==="dark"}),()=>({"text-gray-100":d(n)==="light","text-gray-800":d(n)==="dark"}),()=>({"text-gray-300":d(n)==="light","text-gray-600":d(n)==="dark"}),()=>({"text-white":d(n)==="light","text-gray-900":d(n)==="dark"}),()=>(d(g),H(()=>d(g)?.full_name?.toUpperCase()||"N/A")),()=>(t(),d(m),H(()=>t()==="ar"?d(m)?.name==="gold"?"ÿ∞Ÿáÿ®Ÿä":d(m)?.name==="silver"?"ŸÅÿ∂Ÿä":d(m)?.name==="bronze"?"ÿ®ÿ±ŸàŸÜÿ≤Ÿä":d(m)?.name==="platinum"?"ÿ®ŸÑÿßÿ™ŸäŸÜŸä":d(m)?.name==="diamond"?"ŸÖÿßÿ≥Ÿä":"ÿ®ÿ±ŸàŸÜÿ≤Ÿä":d(m)?.name?.toUpperCase()||"BRONZE")),()=>({"text-white":d(n)==="light","text-gray-800":d(n)==="dark"}),()=>({"text-white":d(n)==="light","text-gray-900":d(n)==="dark"}),()=>({"text-gray-300":d(n)==="light","text-gray-600":d(n)==="dark"}),()=>({"text-gray-100":d(n)==="light","text-gray-800":d(n)==="dark"}),()=>(d(g),H(()=>I(d(g)?.registration_date))),()=>({"text-gray-300":d(n)==="light","text-gray-600":d(n)==="dark"}),()=>({"text-white":d(n)==="light","text-gray-900":d(n)==="dark"}),()=>(d(g),H(()=>I(d(g)?.valid_until))),()=>({"text-right":t()==="ar"}),()=>({"flex-row-reverse":t()==="ar"}),()=>({"flex-row-reverse":t()==="ar"}),()=>({"flex-row-reverse":t()==="ar"})]),st(W,rt)};qt(G,W=>{d(g)&&W(et)},!0)}st(L,z)};qt(v,L=>{d(h)?L(p):L(y,!1)},!0)}st(u,c)};qt(E,u=>{d(b)?u(C):u(w,!1)})}A(x),A(_),Lt(u=>k=F(_,1,"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 p-4 lg:p-8 font-sans text-gray-800 svelte-108zud2",null,k,u),[()=>({rtl:t()==="ar"})]),st(o,_),dn(),r()}export{so as component};
