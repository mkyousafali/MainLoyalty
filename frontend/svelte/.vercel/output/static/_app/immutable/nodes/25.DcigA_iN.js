import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as ws}from"../chunks/Y1pQyyvi.js";import{l as Ss,m as k,C as he,v as t,t as U,x as ee,a as e,n as f,o as Cs,w as n,y as $,B as b,s as d,z as a,E as B,I as Ds}from"../chunks/Ck91ypkQ.js";import{i as M}from"../chunks/RujGBxXx.js";import{e as je,i as qe}from"../chunks/D775oJua.js";import{a as Es,r as Je}from"../chunks/DvH4tfbe.js";import{s as j}from"../chunks/B38bOHRo.js";import{s as $s}from"../chunks/CNyBBxAM.js";import{b as Ke}from"../chunks/C4HntxLm.js";import{b as Fs}from"../chunks/J-1wTRcM.js";import{i as Rs}from"../chunks/6tn_K0LM.js";import{s as se}from"../chunks/CIOq__Tp.js";import"../chunks/qrUVQqOk.js";import{u as q,w as Us,r as As}from"../chunks/480hx4lC.js";var Is=k('<div class="instruction-item svelte-axbp6k"><span class="instruction-icon svelte-axbp6k">ğŸ“‹</span> <span class="instruction-text svelte-axbp6k">Upload a file containing <strong class="svelte-axbp6k">mobile numbers only</strong> (one per row)</span></div> <div class="instruction-item svelte-axbp6k"><span class="instruction-icon svelte-axbp6k">ğŸ“±</span> <span class="instruction-text svelte-axbp6k">Mobile numbers must be 10 digits starting with 5 (e.g., 5012345678)</span></div> <div class="instruction-item svelte-axbp6k"><span class="instruction-icon svelte-axbp6k">âœ…</span> <span class="instruction-text svelte-axbp6k">Numbers will be stored for future customer registration eligibility</span></div>',1),Ms=k('<div class="instruction-item svelte-axbp6k"><span class="instruction-icon svelte-axbp6k">ğŸ‘¥</span> <span class="instruction-text svelte-axbp6k">Required columns: <strong class="svelte-axbp6k">mobile, full_name, address, branch_id</strong></span></div> <div class="instruction-item svelte-axbp6k"><span class="instruction-icon svelte-axbp6k">ğŸ“§</span> <span class="instruction-text svelte-axbp6k">Optional column: <strong class="svelte-axbp6k">email</strong> (if provided, must be valid format)</span></div> <div class="instruction-item svelte-axbp6k"><span class="instruction-icon svelte-axbp6k">âœ…</span> <span class="instruction-text svelte-axbp6k">Customers will be automatically registered and activated</span></div>',1),Ns=k('<div class="file-info svelte-axbp6k"><div class="file-details svelte-axbp6k"><span class="file-name svelte-axbp6k"> </span> <span class="file-size svelte-axbp6k"> </span> <span class="file-mode svelte-axbp6k"> </span></div></div>'),zs=k('<div class="progress-section svelte-axbp6k"><div class="progress-header svelte-axbp6k"><span class="progress-title svelte-axbp6k">Upload Progress</span> <span class="progress-percentage svelte-axbp6k"> </span></div> <div class="progress-bar svelte-axbp6k"><div class="progress-fill svelte-axbp6k"></div></div> <div class="progress-details svelte-axbp6k"><span class="progress-message svelte-axbp6k"> </span> <span class="progress-count svelte-axbp6k"> </span></div></div>'),Hs=k('<span class="loading-spinner svelte-axbp6k"></span> <span class="svelte-axbp6k"> </span>',1),Ls=k('<span class="btn-icon svelte-axbp6k">â¬†ï¸</span> <span class="svelte-axbp6k"> </span>',1),Ps=k('<div class="result-stats svelte-axbp6k"><div class="stat-item svelte-axbp6k"><span class="stat-label svelte-axbp6k">Total Records:</span> <span class="stat-value svelte-axbp6k"> </span></div> <div class="stat-item svelte-axbp6k"><span class="stat-label svelte-axbp6k">Successfully Added:</span> <span class="stat-value success svelte-axbp6k"> </span></div> <div class="stat-item svelte-axbp6k"><span class="stat-label svelte-axbp6k">Errors:</span> <span class="stat-value error svelte-axbp6k"> </span></div></div>'),Vs=k('<div class="error-item svelte-axbp6k"><span class="error-row svelte-axbp6k"> </span> <span class="error-value svelte-axbp6k"> </span> <span class="error-msg svelte-axbp6k"> </span></div>'),Os=k('<details class="error-details svelte-axbp6k"><summary class="svelte-axbp6k"> </summary> <div class="error-list svelte-axbp6k"></div></details>'),Ts=k('<div class="result-section svelte-axbp6k"><div><div class="result-header svelte-axbp6k"><span class="result-icon svelte-axbp6k"> </span> <h3 class="result-title svelte-axbp6k">Upload Result</h3></div> <p class="result-message svelte-axbp6k"> </p> <!> <!></div></div>'),Bs=k('<span class="history-stat error svelte-axbp6k"> </span>'),js=k('<div class="history-item svelte-axbp6k"><div class="history-main svelte-axbp6k"><span class="history-file svelte-axbp6k"> </span> <span class="history-date svelte-axbp6k"> </span></div> <div class="history-mode svelte-axbp6k"><span> </span></div> <div class="history-stats svelte-axbp6k"><span class="history-stat success svelte-axbp6k"> </span> <span class="history-stat total svelte-axbp6k"> </span> <!></div></div>'),qs=k('<div class="history-list svelte-axbp6k"></div>'),Js=k('<div class="empty-state svelte-axbp6k"><span class="empty-icon svelte-axbp6k">ğŸ“­</span> <p class="empty-text svelte-axbp6k">No upload history found</p></div>'),Ks=k('<div class="history-section svelte-axbp6k"><div class="history-card svelte-axbp6k"><div class="history-header svelte-axbp6k"><h3 class="card-title svelte-axbp6k"><span class="title-icon svelte-axbp6k">ğŸ“š</span> Recent Upload History</h3></div> <!></div></div>'),Gs=k(`<div class="page-header svelte-axbp6k"><div class="header-content svelte-axbp6k"><div class="header-left svelte-axbp6k"><h1 class="page-title svelte-axbp6k">ğŸ“¤ Customer Bulk Upload</h1> <p class="page-description svelte-axbp6k">Upload Excel/CSV files for customer eligibility or full registration.
        Support for progress tracking and comprehensive error reporting.</p></div> <div class="header-actions svelte-axbp6k"><button class="btn btn-success svelte-axbp6k" title="Download Excel template with proper format"><span class="btn-icon svelte-axbp6k">ğŸ“¥</span> </button> <button class="btn btn-secondary svelte-axbp6k"><span class="btn-icon svelte-axbp6k">ğŸ“‹</span> </button></div></div></div> <div class="mode-selection svelte-axbp6k"><div class="mode-card svelte-axbp6k"><h3 class="mode-title svelte-axbp6k"><span class="title-icon svelte-axbp6k">âš™ï¸</span> Upload Mode</h3> <div class="mode-options svelte-axbp6k"><label><input type="radio" class="svelte-axbp6k"/> <div class="option-content svelte-axbp6k"><div class="option-header svelte-axbp6k"><span class="option-icon svelte-axbp6k">ğŸ“±</span> <span class="option-title svelte-axbp6k">Eligibility Upload</span></div> <p class="option-description svelte-axbp6k">Upload mobile numbers only for customer eligibility. 
            Numbers will be available for future registration.</p> <div class="option-features svelte-axbp6k"><span class="feature svelte-axbp6k">âœ“ Mobile numbers only</span> <span class="feature svelte-axbp6k">âœ“ Fast processing</span> <span class="feature svelte-axbp6k">âœ“ Eligibility tracking</span></div></div></label> <label><input type="radio" class="svelte-axbp6k"/> <div class="option-content svelte-axbp6k"><div class="option-header svelte-axbp6k"><span class="option-icon svelte-axbp6k">ğŸ‘¥</span> <span class="option-title svelte-axbp6k">Full Registration</span></div> <p class="option-description svelte-axbp6k">Upload complete customer data for immediate registration.
            Includes validation and automatic account creation.</p> <div class="option-features svelte-axbp6k"><span class="feature svelte-axbp6k">âœ“ Complete customer data</span> <span class="feature svelte-axbp6k">âœ“ Automatic registration</span> <span class="feature svelte-axbp6k">âœ“ Data validation</span></div></div></label></div></div></div> <div class="upload-section svelte-axbp6k"><div class="upload-card svelte-axbp6k"><div class="upload-header svelte-axbp6k"><h3 class="card-title svelte-axbp6k"><span class="title-icon svelte-axbp6k">ğŸ“</span> </h3></div> <div class="upload-content svelte-axbp6k"><div class="upload-instructions svelte-axbp6k"><h4 class="svelte-axbp6k"> </h4> <!> <div class="instruction-item svelte-axbp6k"><span class="instruction-icon svelte-axbp6k">ğŸ“„</span> <span class="instruction-text svelte-axbp6k">Supported formats: Excel (.xlsx, .xls) and CSV (.csv)</span></div> <div class="sample-files svelte-axbp6k"><h5 class="svelte-axbp6k">ğŸ“¥ Sample Files:</h5> <div class="sample-links svelte-axbp6k"><a download="" class="sample-link svelte-axbp6k"><span class="sample-icon svelte-axbp6k">ğŸ“„</span> Download Sample CSV</a> <button class="sample-link svelte-axbp6k"><span class="sample-icon svelte-axbp6k">ğŸ“Š</span> Generate Excel Template</button></div></div></div> <div class="file-input-container svelte-axbp6k"><input type="file" accept=".xlsx,.xls,.csv" class="file-input svelte-axbp6k" id="fileInput"/> <label for="fileInput"><span class="upload-icon svelte-axbp6k">ğŸ“</span> <span class="upload-text svelte-axbp6k"> </span></label></div> <!> <!> <button><!></button> <div class="upload-instructions svelte-axbp6k"><h4 class="svelte-axbp6k">ğŸ“ File Format Instructions:</h4> <ul class="svelte-axbp6k"><li class="svelte-axbp6k">Excel (.xlsx, .xls) or CSV (.csv) files accepted</li> <li class="svelte-axbp6k">Each row should contain one mobile number</li> <li class="svelte-axbp6k">Mobile numbers must be exactly 10 digits</li> <li class="svelte-axbp6k">No headers required - just the numbers</li> <li class="svelte-axbp6k">Duplicate numbers will be ignored</li> <li class="svelte-axbp6k">Numbers will be available for customer registration</li></ul></div></div></div></div> <!> <!>`,1);function ca(Ge,Qe){Ss(Qe,!1);const ye=[];let w=$(null),A=$(!1),D=$(null),pe=$([]),ae=$(!1),m=$("eligibility"),h=$(0),O=0,J=0,z=$([]),te=$(0),T=$(0),le=$(""),K=$();function H(s,l,r){d(te,s),d(h,l),d(T,l>0?Math.round(s/l*100):0),d(le,r)}function Ye(s){const r=s.target.files?.[0];if(r){if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(r.type)){alert("Please upload an Excel (.xlsx, .xls) or CSV file");return}d(w,r),d(D,null),d(T,0),d(te,0),d(le,"")}}async function Ze(){if(!e(w)){alert("Please select a file first");return}d(A,!0),d(D,null),d(h,0),O=0,J=0,d(z,[]),d(T,0),d(te,0);try{H(0,0,"Reading file...");let s=[];e(w).type==="text/csv"?s=await ss(e(w)):s=await as(e(w)),d(h,s.length),H(0,e(h),"Validating data..."),e(m)==="eligibility"?await We(s):await Xe(s),await ts(),d(D,{success:!0,message:`Upload completed! ${O} records processed successfully.`,stats:{total:e(h),success:O,errors:J}}),d(w,null),e(K)&&Ds(K,e(K).value="")}catch(s){console.error("Upload error:",s),d(D,{success:!1,message:`Upload failed: ${s instanceof Error?s.message:String(s)}`,stats:null})}finally{d(A,!1),d(T,100),d(le,"Upload completed")}}async function We(s){H(0,e(h),"Processing eligibility numbers...");const l=[],r=[];if(s.forEach((o,v)=>{const i=String(o.mobile||o.customer_number||o.phone||"").replace(/\D/g,"");i.length===10&&/^\d{10}$/.test(i)?l.push(i):r.push({row:v+1,value:o.mobile||o.customer_number||o.phone||"",error:"Invalid mobile number format (must be 10 digits)"}),H(v+1,e(h),`Validating record ${v+1}...`)}),l.length>0){H(e(h),e(h),"Saving to database...");const{data:o,error:v}=await se.from("customer_numbers").upsert(l.map(i=>({customer:i,status:"not_registered",uploaded_at:new Date().toISOString()})),{onConflict:"customer",ignoreDuplicates:!0});if(v)throw console.error("Database insert error:",v),v;O=l.length}J=r.length,d(z,r)}async function Xe(s){H(0,e(h),"Processing customer registrations...");const l=[],r=[],{data:o}=await se.from("branches").select("id"),v=new Set(o?.map(i=>i.id)||[]);if(s.forEach((i,c)=>{const p=es(i,v);p.length===0?l.push({card_number:String(i.mobile||i.customer_code||"").replace(/\D/g,""),customer_code:String(i.mobile||i.customer_code||"").replace(/\D/g,""),full_name:String(i.full_name||i.name||"").trim(),mobile:String(i.mobile||i.phone||"").replace(/\D/g,""),phone:String(i.mobile||i.phone||"").replace(/\D/g,""),email:i.email?String(i.email).trim():null,address:String(i.address||i.place||"").trim(),place:String(i.address||i.place||"").trim(),nearest_branch_id:parseInt(i.branch_id||"1"),card_type_id:null,valid_until:new Date(new Date().getFullYear(),11,31,23,59,59).toISOString(),is_active:!0,registration_date:new Date().toISOString()}):r.push({row:c+1,data:i,errors:p}),H(c+1,e(h),`Validating customer ${c+1}...`)}),l.length>0){let c=0;for(let p=0;p<l.length;p+=50){const x=l.slice(p,p+50);H(c,e(h),`Saving customers ${c+1}-${Math.min(c+50,l.length)}...`);const{error:u}=await se.from("customers").upsert(x,{onConflict:"customer_code",ignoreDuplicates:!1});if(u)throw console.error("Database insert error:",u),u;c+=x.length,await new Promise(g=>setTimeout(g,100))}O=l.length}J=r.length,d(z,r.map(i=>({row:i.row,value:JSON.stringify(i.data),error:i.errors.join(", ")})))}function es(s,l){const r=[],o=String(s.mobile||s.phone||"").replace(/\D/g,"");(!o||o.length!==10||!/^\d{10}$/.test(o))&&r.push("Invalid mobile number (must be 10 digits)");const v=String(s.full_name||s.name||"").trim();(!v||v.length<2)&&r.push("Invalid full name (required, minimum 2 characters)");const i=parseInt(s.branch_id||"1");return l.has(i)||r.push(`Invalid branch ID: ${s.branch_id}`),s.email&&s.email.trim()&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email.trim())||r.push("Invalid email format")),r}async function ss(s){const r=(await s.text()).split(`
`).map(p=>p.trim()).filter(p=>p);if(r.length===0)return[];const o=r[0],v=o.toLowerCase().includes("mobile")||o.toLowerCase().includes("name")||o.toLowerCase().includes("phone"),i=v?r.slice(1):r,c=v?o.split(",").map(p=>p.trim().toLowerCase()):e(m)==="eligibility"?["mobile"]:["mobile","full_name","address","branch_id"];return i.map(p=>{const x=p.split(",").map(g=>g.trim()),u={};return c.forEach((g,S)=>{x[S]&&(u[g]=x[S])}),u})}async function as(s){return new Promise((l,r)=>{const o=new FileReader;o.onload=v=>{try{const i=new Uint8Array(v.target?.result),c=As(i,{type:"array"}),p=c.SheetNames[0],x=c.Sheets[p],u=q.sheet_to_json(x,{header:1});if(u.length===0){l([]);return}const g=u[0],S=g.some(_=>String(_).toLowerCase().includes("mobile")||String(_).toLowerCase().includes("name")||String(_).toLowerCase().includes("phone")),C=S?g.map(_=>String(_).trim().toLowerCase()):e(m)==="eligibility"?["mobile"]:["mobile","full_name","address","branch_id"],E=(S?u.slice(1):u).map(_=>{const F={};return C.forEach((R,y)=>{_[y]!==void 0&&_[y]!==null&&_[y]!==""&&(F[R]=String(_[y]).trim())}),F}).filter(_=>Object.keys(_).length>0);l(E)}catch(i){r(i)}},o.onerror=()=>r(new Error("Failed to read file")),o.readAsArrayBuffer(s)})}async function ts(){try{const{error:s}=await se.from("customer_upload_logs").insert({file_name:e(w)?.name,upload_mode:e(m),record_count:e(h),success_count:O,error_count:J,errors:e(z).length>0?e(z):null});s&&console.error("Failed to log upload:",s)}catch(s){console.error("Upload logging error:",s)}}async function ls(){try{const{data:s,error:l}=await se.from("customer_upload_logs").select("*").order("uploaded_at",{ascending:!1}).limit(10);if(l)throw l;d(pe,s||[])}catch(s){console.error("Failed to load upload history:",s)}}ws(()=>{ls()});function we(){let s,l;e(m)==="eligibility"?(s=[["mobile"],["5012345678"],["5023456789"],["5034567890"],["5045678901"],["5056789012"]],l="customer_eligibility_template"):(s=[["mobile","full_name","address","branch_id","email"],["5012345678","Ahmed Al-Rashid","Riyadh, Al-Malaz District","1","ahmed@example.com"],["5023456789","Fatima Al-Zahra","Jeddah, Al-Balad","2","fatima@example.com"],["5034567890","Mohammed Al-Hassan","Dammam, Al-Khobar","3","mohammed@example.com"],["5045678901","Aisha Al-Qahtani","Mecca, Al-Aziziyah","4","aisha@example.com"],["5056789012","Omar Al-Sudairi","Medina, Al-Haram","5","omar@example.com"]],l="customer_registration_template");const r=q.book_new(),o=q.aoa_to_sheet(s);e(m)==="eligibility"?o["!cols"]=[{width:15}]:o["!cols"]=[{width:15},{width:20},{width:25},{width:12},{width:25}],e(m);const v=q.decode_range(o["!ref"]||"A1");for(let p=v.s.c;p<=v.e.c;p++){const x=q.encode_cell({r:0,c:p});o[x]&&(o[x].s={font:{bold:!0,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"3B82F6"}},alignment:{horizontal:"center"}})}q.book_append_sheet(r,o,e(m)==="eligibility"?"Customer_Eligibility":"Customer_Registration");const i=new Date().toISOString().slice(0,19).replace(/:/g,"-"),c=`${l}_${i}.xlsx`;Us(r,c)}Rs();var Se=Gs(),ce=he(Se),Ce=t(ce),De=n(t(Ce),2),ie=t(De),is=n(t(ie));a(ie);var ve=n(ie,2),rs=n(t(ve));a(ve),a(De),a(Ce),a(ce);var de=n(ce,2),Ee=t(de),$e=n(t(Ee),2),re=t($e);let Fe;var G=t(re);Je(G),G.value=G.__value="eligibility",B(2),a(re);var be=n(re,2);let Re;var Q=t(be);Je(Q),Q.value=Q.__value="full",B(2),a(be),a($e),a(Ee),a(de);var ue=n(de,2),Ue=t(ue),me=t(Ue),Ae=t(me),os=n(t(Ae));a(Ae),a(me);var Ie=n(me,2),xe=t(Ie),_e=t(xe),ns=t(_e);a(_e);var Me=n(_e,2);{var ps=s=>{var l=Is();B(4),f(s,l)},cs=s=>{var l=Ms();B(4),f(s,l)};M(Me,s=>{e(m)==="eligibility"?s(ps):s(cs,!1)})}var Ne=n(Me,4),ze=n(t(Ne),2),He=t(ze),vs=n(He,2);a(ze),a(Ne),a(xe);var ge=n(xe,2),oe=t(ge);Fs(oe,s=>d(K,s),()=>e(K));var fe=n(oe,2);let Le;var Pe=n(t(fe),2),ds=t(Pe,!0);a(Pe),a(fe),a(ge);var Ve=n(ge,2);{var bs=s=>{var l=Ns(),r=t(l),o=t(r),v=t(o);a(o);var i=n(o,2),c=t(i);a(i);var p=n(i,2),x=t(p);a(p),a(r),a(l),U(u=>{b(v,`ğŸ“„ ${e(w).name??""}`),b(c,`${u??""} KB`),b(x,`Mode: ${e(m)==="eligibility"?"Eligibility":"Full Registration"}`)},[()=>(e(w).size/1024).toFixed(1)]),f(s,l)};M(Ve,s=>{e(w)&&s(bs)})}var Oe=n(Ve,2);{var us=s=>{var l=zs(),r=t(l),o=n(t(r),2),v=t(o);a(o),a(r);var i=n(r,2),c=t(i);a(i);var p=n(i,2),x=t(p),u=t(x,!0);a(x);var g=n(x,2),S=t(g);a(g),a(p),a(l),U(()=>{b(v,`${e(T)??""}%`),$s(c,`width: ${e(T)??""}%`),b(u,e(le)),b(S,`${e(te)??""} / ${e(h)??""} records`)}),f(s,l)};M(Oe,s=>{e(A)&&s(us)})}var Y=n(Oe,2);let Te;var ms=t(Y);{var xs=s=>{var l=Hs(),r=n(he(l),2),o=t(r);a(r),U(()=>b(o,`Processing ${e(m)==="eligibility"?"Eligibility":"Registration"}...`)),f(s,l)},_s=s=>{var l=Ls(),r=n(he(l),2),o=t(r);a(r),U(()=>b(o,`Upload ${e(m)==="eligibility"?"Eligibility Numbers":"Customer Registrations"}`)),f(s,l)};M(ms,s=>{e(A)?s(xs):s(_s,!1)})}a(Y),B(2),a(Ie),a(Ue),a(ue);var Be=n(ue,2);{var gs=s=>{var l=Ts(),r=t(l),o=t(r),v=t(o),i=t(v,!0);a(v),B(2),a(o);var c=n(o,2),p=t(c,!0);a(c);var x=n(c,2);{var u=C=>{var I=Ps(),E=t(I),_=n(t(E),2),F=t(_,!0);a(_),a(E);var R=n(E,2),y=n(t(R),2),P=t(y,!0);a(y),a(R);var N=n(R,2),L=n(t(N),2),V=t(L,!0);a(L),a(N),a(I),U(()=>{b(F,e(D).stats.total),b(P,e(D).stats.success),b(V,e(D).stats.errors)}),f(C,I)};M(x,C=>{e(D).stats&&C(u)})}var g=n(x,2);{var S=C=>{var I=Os(),E=t(I),_=t(E);a(E);var F=n(E,2);je(F,5,()=>e(z),qe,(R,y)=>{var P=Vs(),N=t(P),L=t(N);a(N);var V=n(N,2),Z=t(V);a(V);var ne=n(V,2),ke=t(ne);a(ne),a(P),U(()=>{b(L,`Row ${e(y).row??""}:`),b(Z,`"${e(y).value??""}"`),b(ke,`- ${e(y).error??""}`)}),f(R,P)}),a(F),a(I),U(()=>b(_,`View Error Details (${e(z).length??""} errors)`)),f(C,I)};M(g,C=>{e(z).length>0&&C(S)})}a(r),a(l),U(()=>{j(r,1,`result-card ${e(D).success?"success":"error"}`,"svelte-axbp6k"),b(i,e(D).success?"âœ…":"âŒ"),b(p,e(D).message)}),f(s,l)};M(Be,s=>{e(D)&&s(gs)})}var fs=n(Be,2);{var ks=s=>{var l=Ks(),r=t(l),o=n(t(r),2);{var v=c=>{var p=qs();je(p,5,()=>e(pe),qe,(x,u)=>{var g=js(),S=t(g),C=t(S),I=t(C);a(C);var E=n(C,2),_=t(E,!0);a(E),a(S);var F=n(S,2),R=t(F);let y;var P=t(R,!0);a(R),a(F);var N=n(F,2),L=t(N),V=t(L);a(L);var Z=n(L,2),ne=t(Z);a(Z);var ke=n(Z,2);{var hs=W=>{var X=Bs(),ys=t(X);a(X),U(()=>b(ys,`âŒ ${e(u).error_count??""} errors`)),f(W,X)};M(ke,W=>{e(u).error_count>0&&W(hs)})}a(N),a(g),U((W,X)=>{b(I,`ğŸ“„ ${e(u).file_name||"Unknown file"}`),b(_,W),y=j(R,1,"mode-badge svelte-axbp6k",null,y,X),b(P,e(u).upload_mode==="eligibility"?"ğŸ“± Eligibility":"ğŸ‘¥ Full Registration"),b(V,`âœ… ${e(u).success_count??""} processed`),b(ne,`ğŸ“Š ${e(u).record_count??""} total`)},[()=>new Date(e(u).uploaded_at).toLocaleString(),()=>({eligibility:e(u).upload_mode==="eligibility",full:e(u).upload_mode==="full"})]),f(x,g)}),a(p),f(c,p)},i=c=>{var p=Js();f(c,p)};M(o,c=>{e(pe).length>0?c(v):c(i,!1)})}a(r),a(l),f(s,l)};M(fs,s=>{e(ae)&&s(ks)})}U((s,l,r,o)=>{b(is,` Download ${e(m)==="eligibility"?"Eligibility":"Registration"} Template`),b(rs,` ${e(ae)?"Hide History":"View History"}`),Fe=j(re,1,"mode-option svelte-axbp6k",null,Fe,s),G.disabled=e(A),Re=j(be,1,"mode-option svelte-axbp6k",null,Re,l),Q.disabled=e(A),b(os,` ${e(m)==="eligibility"?"Upload Eligibility File":"Upload Registration File"}`),b(ns,`ğŸ“ ${e(m)==="eligibility"?"Eligibility":"Registration"} Upload Instructions:`),Es(He,"href",`/sample_customer_${e(m)==="eligibility"?"eligibility":"registration"}.csv`),oe.disabled=e(A),Le=j(fe,1,"file-input-label svelte-axbp6k",null,Le,r),b(ds,e(w)?e(w).name:`Choose ${e(m)==="eligibility"?"eligibility":"registration"} file`),Te=j(Y,1,"btn btn-primary upload-btn svelte-axbp6k",null,Te,o),Y.disabled=!e(w)||e(A)},[()=>({active:e(m)==="eligibility"}),()=>({active:e(m)==="full"}),()=>({disabled:e(A)}),()=>({loading:e(A)})]),ee("click",ie,we),ee("click",ve,()=>d(ae,!e(ae))),Ke(ye,[],G,()=>e(m),s=>d(m,s)),Ke(ye,[],Q,()=>e(m),s=>d(m,s)),ee("click",vs,we),ee("change",oe,Ye),ee("click",Y,Ze),f(Ge,Se),Cs()}export{ca as component};
