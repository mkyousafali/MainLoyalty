import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as C}from"../chunks/Y1pQyyvi.js";import{l as $,m as y,t as h,a as s,x as B,n as i,o as U,w as g,v as c,I as d,y as b,s as o,E as j,z as m,G as x,B as q}from"../chunks/Ck91ypkQ.js";import{i as _}from"../chunks/RujGBxXx.js";import{r as z}from"../chunks/DvH4tfbe.js";import{s as F}from"../chunks/B38bOHRo.js";import{s as O}from"../chunks/CNyBBxAM.js";import{a as P}from"../chunks/C4HntxLm.js";import{i as H}from"../chunks/6tn_K0LM.js";import{s as w}from"../chunks/CIOq__Tp.js";var J=y("<p> </p>"),K=y('<div class="p-6 bg-green-50 border border-green-200 rounded-xl shadow mb-6 max-w-4xl mx-auto svelte-1rg79sv"><div class="flex items-center gap-3 mb-4 svelte-1rg79sv"><div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center svelte-1rg79sv"><svg class="w-6 h-6 text-green-600 svelte-1rg79sv" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488" class="svelte-1rg79sv"></path></svg></div> <div class="svelte-1rg79sv"><h2 class="text-xl font-bold text-green-800 svelte-1rg79sv">üåç Global WhatsApp Support</h2> <p class="text-sm text-gray-700 svelte-1rg79sv">Add WhatsApp link for customer support across the app</p></div></div> <div class="mb-4 svelte-1rg79sv"><label class="block text-sm font-medium text-gray-800 mb-2 svelte-1rg79sv">WhatsApp Link</label> <input type="url" placeholder="https://wa.me/966500000000" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-green-500 focus:border-transparent text-lg text-gray-900 bg-white placeholder-gray-500 svelte-1rg79sv" style="color: #111827 !important;"/> <p class="text-xs text-gray-600 mt-1 svelte-1rg79sv">Enter the complete WhatsApp link (e.g., https://wa.me/966500000000)</p></div> <button class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium disabled:bg-gray-400 disabled:cursor-not-allowed svelte-1rg79sv"><!></button> <!></div>');function rt(k,A){$(A,!1);let a=b({whatsappNumber:"https://wa.me/966500000000"}),r=b(""),l=b(!1);C(()=>{W()});async function W(){try{o(l,!0);const{data:t,error:e}=await w.from("global_settings").select("setting_value").eq("setting_key","whatsapp_support_link").single();if(e){console.error("Error loading WhatsApp link:",e);const p=localStorage.getItem("globalWhatsAppSupportLink");p&&d(a,s(a).whatsappNumber=p);return}t?.setting_value&&(d(a,s(a).whatsappNumber=t.setting_value),console.log("WhatsApp link loaded from database:",t.setting_value))}catch(t){console.error("Error loading global settings:",t)}finally{o(l,!1)}}async function S(){if(!s(a).whatsappNumber.startsWith("https://wa.me/")){o(r,"‚ùå WhatsApp link must start with https://wa.me/");return}try{o(l,!0),o(r,"‚è≥ Saving to database..."),console.log("üîÑ Attempting to save WhatsApp link:",s(a).whatsappNumber);const{data:t,error:e}=await w.from("global_settings").upsert({setting_key:"whatsapp_support_link",setting_value:s(a).whatsappNumber,description:"Global WhatsApp support link for Urban Market",setting_type:"text",updated_at:new Date().toISOString()},{onConflict:"setting_key",ignoreDuplicates:!1});if(e){console.error("‚ùå Database error details:",e),o(r,`‚ùå Database error: ${e.message}`),e.message.includes("relation")&&e.message.includes("does not exist")&&o(r,"‚ùå Database table not found. Please create the global_settings table first.");return}console.log("‚úÖ Database update successful:",t),localStorage.setItem("globalWhatsAppSupportLink",s(a).whatsappNumber),o(r,"‚úÖ Global WhatsApp support link saved successfully!"),console.log("‚úÖ WhatsApp link saved successfully:",s(a).whatsappNumber)}catch(t){o(r,`‚ùå Failed to save WhatsApp link: ${t instanceof Error?t.message:"Unknown error"}`),console.error("Error saving global settings:",t)}finally{o(l,!1)}}H();var u=K(),v=g(c(u),2),f=g(c(v),2);z(f),j(2),m(v);var n=g(v,2),N=c(n);{var D=t=>{var e=x("‚è≥ Saving...");i(t,e)},E=t=>{var e=x("üíæ Save WhatsApp Link");i(t,e)};_(N,t=>{s(l)?t(D):t(E,!1)})}m(n);var G=g(n,2);{var L=t=>{var e=J(),p=c(e,!0);m(e),h((I,M)=>{F(e,1,`mt-3 text-sm font-medium ${I??""}`,"svelte-1rg79sv"),O(e,`color: ${M??""};`),q(p,s(r))},[()=>s(r).includes("‚úÖ")?"text-green-600":"text-red-600",()=>s(r).includes("‚úÖ")?"#059669 !important":"#dc2626 !important"]),i(t,e)};_(G,t=>{s(r)&&t(L)})}m(u),h(()=>n.disabled=s(l)),P(f,()=>s(a).whatsappNumber,t=>d(a,s(a).whatsappNumber=t)),B("click",n,S),i(k,u),U()}export{rt as component};
