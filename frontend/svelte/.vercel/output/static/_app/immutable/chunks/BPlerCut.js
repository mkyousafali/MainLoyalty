import{d as c,w as r}from"./CmJYm0S5.js";function n(e,s){if(typeof window>"u")return s;try{const a=localStorage.getItem(e);return a===null?s:JSON.parse(a)}catch(a){return console.warn(`Error reading from localStorage key "${e}":`,a),s}}function m(e,s){if(typeof window>"u")return!1;try{return localStorage.setItem(e,JSON.stringify(s)),!0}catch(a){return console.warn(`Error writing to localStorage key "${e}":`,a),!1}}const d=r(null),u=r([]),g=r([]),_=r([]),l=r([]);c(d,e=>e?.isMasterAdmin||!1);c([l,u],([e,s])=>{const a=s.map(i=>i.id);return e.filter(i=>i.isCore?!0:i.requiredPermissions.every(o=>a.includes(o)))});const t=[{id:"user_view",name:"View Users",description:"View user list and details",category:"user_management",resource:"users",action:"read",isRequired:!1},{id:"user_create",name:"Create Users",description:"Create new user accounts",category:"user_management",resource:"users",action:"create",isRequired:!1},{id:"user_edit",name:"Edit Users",description:"Modify user information",category:"user_management",resource:"users",action:"update",isRequired:!1},{id:"user_delete",name:"Delete Users",description:"Delete user accounts",category:"user_management",resource:"users",action:"delete",isRequired:!1},{id:"role_manage",name:"Manage Roles",description:"Create and modify user roles",category:"user_management",resource:"roles",action:"manage",isRequired:!1},{id:"customer_view",name:"View Customers",description:"View customer list and details",category:"customer_management",resource:"customers",action:"read",isRequired:!1},{id:"customer_edit",name:"Edit Customers",description:"Modify customer information",category:"customer_management",resource:"customers",action:"update",isRequired:!1},{id:"customer_upload",name:"Upload Customers",description:"Bulk upload customer data",category:"customer_management",resource:"customers",action:"bulk_create",isRequired:!1},{id:"analytics_view",name:"View Analytics",description:"Access analytics and reports",category:"analytics",resource:"analytics",action:"read",isRequired:!1},{id:"reports_export",name:"Export Reports",description:"Export reports and data",category:"analytics",resource:"reports",action:"export",isRequired:!1},{id:"offers_manage",name:"Manage Offers",description:"Create and manage offers",category:"content_management",resource:"offers",action:"manage",isRequired:!1},{id:"rewards_manage",name:"Manage Rewards",description:"Create and manage rewards",category:"content_management",resource:"rewards",action:"manage",isRequired:!1},{id:"cards_manage",name:"Manage Card Types",description:"Create and manage card types",category:"content_management",resource:"cards",action:"manage",isRequired:!1},{id:"terms_manage",name:"Manage Terms & Conditions",description:"Edit terms and conditions",category:"content_management",resource:"terms",action:"manage",isRequired:!1},{id:"notifications_send",name:"Send Notifications",description:"Send notifications to customers",category:"notifications",resource:"notifications",action:"create",isRequired:!1},{id:"notifications_manage",name:"Manage Notifications",description:"Manage notification center",category:"notifications",resource:"notifications",action:"manage",isRequired:!1},{id:"system_settings",name:"System Settings",description:"Access system configuration",category:"system_settings",resource:"system",action:"manage",isRequired:!1},{id:"branches_manage",name:"Manage Branches",description:"Manage branch locations",category:"system_settings",resource:"branches",action:"manage",isRequired:!1}],M=[{id:"dashboard",name:"Dashboard",description:"Main dashboard overview",path:"/admin",icon:"🏠",category:"analytics",requiredPermissions:[],isCore:!0},{id:"user_management",name:"User Management",description:"Manage admin users",path:"/admin/user-management",icon:"👥",category:"user_management",requiredPermissions:["user_view"],isCore:!1},{id:"user_roles",name:"Manage User Roles",description:"Manage user roles and permissions",path:"/admin/user-roles",icon:"🔐",category:"user_management",requiredPermissions:["role_manage"],isCore:!1},{id:"customer_management",name:"Customer Management",description:"Manage customers",path:"/admin/customer-management",icon:"👤",category:"customer_management",requiredPermissions:["customer_view"],isCore:!1},{id:"analytics_reports",name:"Analytics & Reports",description:"View analytics and reports",path:"/admin/analytics-reports",icon:"📊",category:"analytics",requiredPermissions:["analytics_view"],isCore:!1},{id:"notification_center",name:"Notification Center",description:"Manage notifications",path:"/admin/notification-center",icon:"🔔",category:"notifications",requiredPermissions:["notifications_manage"],isCore:!1},{id:"terms_management",name:"Terms & Conditions",description:"Manage terms and conditions",path:"/admin/terms-management",icon:"📋",category:"content_management",requiredPermissions:["terms_manage"],isCore:!1},{id:"manage_cards",name:"Manage Card Types",description:"Manage card types",path:"/admin/manage-card-types",icon:"💳",category:"content_management",requiredPermissions:["cards_manage"],isCore:!1},{id:"manage_branches",name:"Manage Branches",description:"Manage branch locations",path:"/admin/manage-branches",icon:"🏢",category:"system_settings",requiredPermissions:["branches_manage"],isCore:!1}],f=[{id:"master_admin",name:"Master Administrator",description:"Full system access with all permissions",isMasterAdmin:!0,permissions:t,isActive:!0,createdAt:new Date().toISOString()},{id:"admin",name:"Administrator",description:"General admin access with most permissions",isMasterAdmin:!1,permissions:t.filter(e=>!["role_manage","user_delete","system_settings"].includes(e.id)),isActive:!0,createdAt:new Date().toISOString()},{id:"manager",name:"Manager",description:"Limited admin access for daily operations",isMasterAdmin:!1,permissions:t.filter(e=>["customer_view","customer_edit","analytics_view","notifications_send"].includes(e.id)),isActive:!0,createdAt:new Date().toISOString()},{id:"operator",name:"Operator",description:"Basic access for customer service",isMasterAdmin:!1,permissions:t.filter(e=>["customer_view","customer_edit"].includes(e.id)),isActive:!0,createdAt:new Date().toISOString()}];function q(){const e=n("userRoles",f),s=n("permissions",t),a=n("adminFunctions",M);if(g.set(e),_.set(s),l.set(a),w()||A()){const o=e.find(y=>y.isMasterAdmin);o&&p(o)}}function p(e){d.set(e),u.set(e.permissions)}function h(){const s=n("userRoles",f).find(a=>a.isMasterAdmin);s&&(p(s),m("isMasterAdmin",!0))}function w(){return n("demoMasterAdmin",!1)}function A(){return n("isMasterAdmin",!1)}function C(e){g.update(s=>{const a={...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},i=[...s,a];return m("roles",i),i})}export{g as a,_ as b,C as c,q as l,h as s};
