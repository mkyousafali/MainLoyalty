import{w as i}from"./CmJYm0S5.js";import{g as r}from"./Bc_wzfnz.js";const a=i(null),s=i(!1),l=i(!1);function m(){if(typeof localStorage<"u"){const e=localStorage.getItem("loyaltyUser"),t=localStorage.getItem("adminUser");if(e)try{const o=JSON.parse(e);a.set({...o,type:"customer"}),s.set(!0),l.set(!1)}catch(o){console.error("Error parsing customer user data:",o),localStorage.removeItem("loyaltyUser"),localStorage.removeItem("loyaltyCardNumber")}else if(t)try{const o=JSON.parse(t);a.set({...o,type:"admin"}),s.set(!0),l.set(!0)}catch(o){console.error("Error parsing admin user data:",o),localStorage.removeItem("adminUser")}}}function f(e){const t={...e,type:"customer"};a.set(t),s.set(!0),l.set(!1),typeof localStorage<"u"&&(localStorage.setItem("loyaltyUser",JSON.stringify(e)),localStorage.setItem("loyaltyCardNumber",e.mobile))}function d(e){const t={...e,type:"admin"};a.set(t),s.set(!0),l.set(!0),typeof localStorage<"u"&&(localStorage.setItem("adminUser",JSON.stringify(e)),localStorage.setItem("adminSession","active"))}function g(){a.set(null),s.set(!1),l.set(!1),typeof localStorage<"u"&&(localStorage.removeItem("loyaltyUser"),localStorage.removeItem("loyaltyCardNumber"),localStorage.removeItem("adminUser"),localStorage.removeItem("adminSession")),r("/login")}function y(e,t){return e?e.type==="admin"?(r("/admin"),!1):!0:(r("/login"),!1)}function S(e,t){return e?e.type==="customer"?(r("/dashboard"),!1):!0:(r("/admin-login"),!1)}function p(e){return!["/login","/admin-login","/register"].some(n=>e.startsWith(n))}export{d as a,g as b,y as c,m as d,p as i,f as l,S as r,a as u};
