import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as nt}from"../chunks/Y1pQyyvi.js";import{l as lt,m as _,J as it,t as E,x as q,n as b,o as vt,$ as pt,w as r,v as a,z as o,a as e,y as f,B as v,s as n,C as z,E as ct,H as bt}from"../chunks/Ck91ypkQ.js";import{i as x}from"../chunks/RujGBxXx.js";import{i as mt}from"../chunks/6tn_K0LM.js";import{s as gt}from"../chunks/CIOq__Tp.js";import{b as ut}from"../chunks/Bt-Xh7oU.js";var _t=_('<div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4"><p>‚è≥ Loading...</p></div>'),ft=_('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"><h3 class="font-bold">‚ùå Error:</h3> <p> </p></div>'),xt=_('<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"><h3 class="font-bold">‚úÖ Customer Data Loaded:</h3> <p><strong>Name:</strong> </p> <p><strong>Mobile:</strong> </p> <p><strong>Points:</strong> </p></div> <div class="bg-white rounded-lg shadow-lg p-6"><div class="text-center mb-6"><h2 class="text-2xl font-bold text-gray-800"> </h2></div> <div class="grid md:grid-cols-2 gap-6"><div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-lg"><h3 class="text-lg font-semibold mb-2">Your Points</h3> <p class="text-3xl font-bold"> </p> <p class="text-sm opacity-90">Total Points Balance</p></div> <div class="bg-gray-50 p-6 rounded-lg"><h3 class="text-lg font-semibold mb-2 text-gray-800">Account Info</h3> <p class="text-gray-600"><strong>Mobile:</strong> </p> <p class="text-gray-600"><strong>Member Since:</strong> </p></div></div></div>',1),ht=_('<div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded"><p>‚ö†Ô∏è No customer data available (not loading, no error, but customerData is null/undefined)</p></div>'),yt=_('<div class="min-h-screen bg-gray-100 p-6"><div class="max-w-4xl mx-auto"><h1 class="text-3xl font-bold mb-6">Simple Dashboard Test</h1> <div class="bg-white border rounded-lg p-4 mb-6"><h3 class="font-bold mb-2">Debug Info:</h3> <pre class="text-sm bg-gray-100 p-3 rounded whitespace-pre-wrap"> </pre></div> <!> <!> <!> <div class="mt-6 space-x-2"><button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Reload Data</button> <button class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Try Full Dashboard</button></div></div></div>');function It(H,R){lt(R,!1);let i=f(null),h=f(!0),p=f(""),s=f("");async function N(){try{n(s,e(s)+`üîç Simple Dashboard: Starting...
`);const t=JSON.parse(localStorage.getItem("loyaltyUser")||"{}");if(n(s,e(s)+`üì± User: ${JSON.stringify(t)}
`),!t.mobile){n(p,"No user found"),n(s,e(s)+`‚ùå No mobile
`);return}n(s,e(s)+`üîç Looking for customer: ${t.mobile}
`);const{data:d,error:l}=await gt.from("customers").select("*").eq("customer_code",t.mobile).single();if(l){n(p,`Error: ${l.message}`),n(s,e(s)+`‚ùå Error: ${l.message}
`);return}n(s,e(s)+`‚úÖ Customer found: ${d.full_name}
`),n(i,d),n(p,"")}catch(t){n(s,e(s)+`üí• Exception: ${t}
`),n(p,`Exception: ${t}`)}finally{n(h,!1)}}nt(()=>{N()}),mt();var y=yt();it(t=>{pt.title="Simple Dashboard Test"});var M=a(y),w=r(a(M),2),k=r(a(w),2),W=a(k,!0);o(k),o(w);var I=r(w,2);{var j=t=>{var d=_t();b(t,d)};x(I,t=>{e(h)&&t(j)})}var L=r(I,2);{var G=t=>{var d=ft(),l=r(a(d),2),c=a(l,!0);o(l),o(d),E(()=>v(c,e(p))),b(t,d)};x(L,t=>{e(p)&&t(G)})}var T=r(L,2);{var K=t=>{var d=xt(),l=z(d),c=r(a(l),2),m=r(a(c));o(c);var g=r(c,2),X=r(a(g));o(g);var P=r(g,2),Z=r(a(P));o(P),o(l);var U=r(l,2),$=a(U),A=a($),tt=a(A);o(A),o($);var B=r($,2),D=a(B),F=r(a(D),2),rt=a(F,!0);o(F),ct(2),o(D);var O=r(D,2),S=r(a(O),2),et=r(a(S));o(S);var Y=r(S,2),at=r(a(Y));o(Y),o(O),o(B),o(U),E(u=>{v(m,` ${e(i).full_name??""}`),v(X,` ${e(i).customer_code??""}`),v(Z,` ${e(i).points??""}`),v(tt,`Welcome, ${e(i).full_name??""}!`),v(rt,e(i).points||0),v(et,` ${e(i).customer_code??""}`),v(at,` ${u??""}`)},[()=>e(i).created_at?(()=>{const u=new Date(e(i).created_at),ot=u.getDate().toString().padStart(2,"0"),st=(u.getMonth()+1).toString().padStart(2,"0"),dt=u.getFullYear();return`${ot}/${st}/${dt}`})():"N/A"]),b(t,d)},Q=t=>{var d=bt(),l=z(d);{var c=m=>{var g=ht();b(m,g)};x(l,m=>{!e(h)&&!e(p)&&m(c)},!0)}b(t,d)};x(T,t=>{e(i)?t(K):t(Q,!1)})}var C=r(T,2),J=a(C),V=r(J,2);o(C),o(M),o(y),E(()=>v(W,e(s))),q("click",J,N),q("click",V,()=>window.location.href="/dashboard"),b(H,y),vt()}export{It as component};
