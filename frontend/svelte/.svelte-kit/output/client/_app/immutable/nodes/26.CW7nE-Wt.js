import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{l as ye,m as p,n as b,o as he,w as r,v as t,s as ne,y as le,a as s,z as e,t as k,B as l,x as we,J as $e,$ as Ue}from"../chunks/Ck91ypkQ.js";import{o as De,a as ke}from"../chunks/Y1pQyyvi.js";import{i as C}from"../chunks/RujGBxXx.js";import{e as ie}from"../chunks/D775oJua.js";import{s as V}from"../chunks/B38bOHRo.js";import{s as de}from"../chunks/CNyBBxAM.js";import{i as Pe}from"../chunks/6tn_K0LM.js";import{u as x}from"../chunks/DHqA4AUT.js";var je=p('<button class="px-3 py-1 bg-red-100 text-red-700 rounded-md text-sm hover:bg-red-200 transition-colors svelte-19rb0n8">Cancel</button>'),Se=p('<span class="text-red-600 svelte-19rb0n8"> </span>'),Ce=p('<div class="mt-3 p-3 bg-red-50 border border-red-200 rounded-md svelte-19rb0n8"><p class="text-sm text-red-700 svelte-19rb0n8"> </p></div>'),Ie=p('<div class="bg-white rounded-lg shadow-md border border-gray-200 p-6 svelte-19rb0n8"><div class="flex items-center justify-between mb-4 svelte-19rb0n8"><div class="flex items-center space-x-3 svelte-19rb0n8"><span class="text-2xl svelte-19rb0n8"> </span> <div class="svelte-19rb0n8"><h3 class="font-medium text-gray-900 svelte-19rb0n8"> </h3> <p class="text-sm text-gray-500 svelte-19rb0n8"> </p></div></div> <div class="flex items-center space-x-3 svelte-19rb0n8"><span> </span> <!></div></div> <div class="mb-3 svelte-19rb0n8"><div class="flex justify-between text-sm text-gray-600 mb-1 svelte-19rb0n8"><span class="svelte-19rb0n8"> </span> <span class="svelte-19rb0n8"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2 svelte-19rb0n8"><div></div></div></div> <div class="flex space-x-6 text-sm text-gray-600 svelte-19rb0n8"><span class="svelte-19rb0n8"> </span> <!></div> <!></div>'),Me=p('<div class="mb-8 svelte-19rb0n8"><h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center svelte-19rb0n8"><span class="w-3 h-3 bg-blue-500 rounded-full mr-2 animate-pulse svelte-19rb0n8"></span> </h2> <div class="space-y-4 svelte-19rb0n8"></div></div>'),Oe=p('<div class="mb-8 text-center py-8 svelte-19rb0n8"><div class="text-gray-400 text-6xl mb-4 svelte-19rb0n8">📋</div> <h3 class="text-lg font-medium text-gray-900 mb-2 svelte-19rb0n8">No Active Uploads</h3> <p class="text-gray-600 svelte-19rb0n8">Upload some transaction files to see progress here</p></div>'),Ae=p('<span class="ml-2 text-red-600 text-xs svelte-19rb0n8"> </span>'),Fe=p('<tr class="hover:bg-gray-50 svelte-19rb0n8"><td class="px-6 py-4 whitespace-nowrap svelte-19rb0n8"><div class="flex items-center svelte-19rb0n8"><span class="text-lg mr-2 svelte-19rb0n8"> </span> <div class="svelte-19rb0n8"><div class="text-sm font-medium text-gray-900 svelte-19rb0n8"> </div> <div class="text-sm text-gray-500 svelte-19rb0n8"> </div></div></div></td><td class="px-6 py-4 whitespace-nowrap svelte-19rb0n8"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 svelte-19rb0n8"><div class="flex items-center svelte-19rb0n8"><div class="w-16 bg-gray-200 rounded-full h-2 mr-2 svelte-19rb0n8"><div></div></div> <span class="svelte-19rb0n8"> </span> <!></div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 svelte-19rb0n8"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 svelte-19rb0n8"> </td></tr>'),Je=p('<div class="svelte-19rb0n8"><h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center svelte-19rb0n8"><span class="w-3 h-3 bg-gray-400 rounded-full mr-2 svelte-19rb0n8"></span> </h2> <div class="bg-white rounded-lg shadow-md border border-gray-200 svelte-19rb0n8"><div class="overflow-x-auto svelte-19rb0n8"><table class="min-w-full divide-y divide-gray-200 svelte-19rb0n8"><thead class="bg-gray-50 svelte-19rb0n8"><tr class="svelte-19rb0n8"><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider svelte-19rb0n8">File</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider svelte-19rb0n8">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider svelte-19rb0n8">Progress</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider svelte-19rb0n8">Duration</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider svelte-19rb0n8">Completed</th></tr></thead><tbody class="bg-white divide-y divide-gray-200 svelte-19rb0n8"></tbody></table></div></div></div>'),Ne=p('<div class="max-w-6xl mx-auto p-6 svelte-19rb0n8"><div class="mb-8 svelte-19rb0n8"><h1 class="text-3xl font-bold text-gray-900 mb-2 svelte-19rb0n8">Upload Status Dashboard</h1> <p class="text-gray-600 svelte-19rb0n8">Monitor your transaction upload progress in real-time</p></div> <!> <!></div>');function Be(W,I){ye(I,!1);let P=le({}),M=le([]),X,Y;De(()=>{X=x.activeUploadsStore.subscribe(a=>{ne(P,Object.fromEntries(a))}),Y=x.completedUploadsStore.subscribe(a=>{ne(M,a)})}),ke(()=>{X&&X(),Y&&Y(),x.destroy()});function oe(a){return new Date(a).toLocaleString()}function ce(a,o){if(!a||!o)return"";const m=new Date(a),f=new Date(o).getTime()-m.getTime(),c=Math.round(f/1e3);return c<60?`${c}s`:`${Math.floor(c/60)}m ${c%60}s`}async function be(a){await x.cancelJob(a)||alert("Failed to cancel upload")}function pe(a){switch(a){case"processing":return"bg-blue-500";case"completed":return"bg-green-500";case"failed":return"bg-red-500";case"paused":return"bg-yellow-500";case"cancelled":return"bg-gray-500";default:return"bg-yellow-500"}}Pe();var Z=Ne(),ve=r(t(Z),2);{var xe=a=>{var o=Me(),m=t(o),q=r(t(m));e(m);var f=r(m,2);ie(f,5,()=>Object.values(s(P)),c=>c.jobId,(c,v)=>{var j=Ie(),u=t(j),n=t(u),_=t(n),O=t(_,!0);e(_);var A=r(_,2),y=t(A),ee=t(y,!0);e(y);var F=r(y,2),J=t(F);e(F),e(A),e(n);var G=r(n,2),h=t(G),te=t(h,!0);e(h);var N=r(h,2);{var B=i=>{var d=je();we("click",d,()=>be(s(v).jobId)),b(i,d)};C(N,i=>{s(v).status==="pending"&&i(B)})}e(G),e(u);var L=r(u,2),w=t(L),S=t(w),T=t(S);e(S);var z=r(S,2),E=t(z);e(z),e(w);var H=r(w,2),K=t(H);e(H),e(L);var R=r(L,2),$=t(R),se=t($);e($);var Q=r($,2);{var re=i=>{var d=Se(),g=t(d);e(d),k(()=>l(g,`❌ Failed: ${s(v).progress.failed??""}`)),b(i,d)};C(Q,i=>{s(v).progress.failed>0&&i(re)})}e(R);var U=r(R,2);{var D=i=>{var d=Ce(),g=t(d),ae=t(g,!0);e(g),e(d),k(()=>l(ae,s(v).error)),b(i,d)};C(U,i=>{s(v).error&&i(D)})}e(j),k((i,d,g,ae,ue,_e)=>{l(O,i),l(ee,s(v).fileName),l(J,`Job ID: ${s(v).jobId??""}`),V(h,1,`px-3 py-1 rounded-full text-sm font-medium ${d??""} bg-gray-100`,"svelte-19rb0n8"),l(te,g),l(T,`Progress: ${s(v).progress.processed??""} / ${s(v).progress.total??""}`),l(E,`${ae??""}%`),V(K,1,`h-2 rounded-full transition-all duration-300 ${ue??""}`,"svelte-19rb0n8"),de(K,`width: ${_e??""}%`),l(se,`✅ Processed: ${s(v).progress.processed??""}`)},[()=>x.getStatusIcon(s(v).status),()=>x.getStatusColor(s(v).status),()=>s(v).status.toUpperCase(),()=>x.getProgressPercentage(s(v)),()=>pe(s(v).status),()=>x.getProgressPercentage(s(v))]),b(c,j)}),e(f),e(o),k(c=>l(q,` Active Uploads (${c??""})`),[()=>Object.keys(s(P)).length]),b(a,o)},me=a=>{var o=Oe();b(a,o)};C(ve,a=>{Object.keys(s(P)).length>0?a(xe):a(me,!1)})}var ge=r(ve,2);{var fe=a=>{var o=Je(),m=t(o),q=r(t(m));e(m);var f=r(m,2),c=t(f),v=t(c),j=r(t(v));ie(j,5,()=>s(M),u=>u.id,(u,n)=>{var _=Fe(),O=t(_),A=t(O),y=t(A),ee=t(y,!0);e(y);var F=r(y,2),J=t(F),G=t(J,!0);e(J);var h=r(J,2),te=t(h);e(h),e(F),e(A),e(O);var N=r(O),B=t(N),L=t(B,!0);e(B),e(N);var w=r(N),S=t(w),T=t(S),z=t(T);e(T);var E=r(T,2),H=t(E);e(E);var K=r(E,2);{var R=U=>{var D=Ae(),i=t(D);e(D),k(()=>l(i,`(${s(n).progress.failed??""} failed)`)),b(U,D)};C(K,U=>{s(n).progress.failed>0&&U(R)})}e(S),e(w);var $=r(w),se=t($,!0);e($);var Q=r($),re=t(Q,!0);e(Q),e(_),k((U,D,i,d,g)=>{l(ee,U),l(G,s(n).fileName),l(te,`${s(n).progress.total??""} transactions`),V(B,1,`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${s(n).status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,"svelte-19rb0n8"),l(L,D),V(z,1,`h-2 rounded-full ${s(n).status==="completed"?"bg-green-500":"bg-red-500"}`,"svelte-19rb0n8"),de(z,`width: ${i??""}%`),l(H,`${s(n).progress.processed??""}/${s(n).progress.total??""}`),l(se,d),l(re,g)},[()=>x.getStatusIcon(s(n).status),()=>s(n).status.toUpperCase(),()=>x.getProgressPercentage(s(n)),()=>ce(s(n).started_at,s(n).completed_at),()=>s(n).completed_at?oe(s(n).completed_at):""]),b(u,_)}),e(j),e(v),e(c),e(f),e(o),k(()=>l(q,` Recent Uploads (${s(M).length??""})`)),b(a,o)};C(ge,a=>{s(M).length>0&&a(fe)})}e(Z),b(W,Z),he()}var Le=p('<div class="min-h-screen bg-gray-100"><!></div>');function We(W){var I=Le();$e(M=>{Ue.title="Upload Status Dashboard - Urban Market Loyalty System"});var P=t(I);Be(P,{}),e(I),b(W,I)}export{We as component};
