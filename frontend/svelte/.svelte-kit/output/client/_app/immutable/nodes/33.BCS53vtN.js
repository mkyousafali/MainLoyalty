import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as Je}from"../chunks/Y1pQyyvi.js";import{l as Ke,m,t as u,n as c,o as Oe,w as s,v as t,B as o,z as e,a,y as j,s as w,H as Pe,C as _e,x as ge}from"../chunks/Ck91ypkQ.js";import{i as h}from"../chunks/RujGBxXx.js";import{e as Qe,i as Ve}from"../chunks/D775oJua.js";import{a as q}from"../chunks/DvH4tfbe.js";import{s as me}from"../chunks/B38bOHRo.js";import{i as Xe}from"../chunks/6tn_K0LM.js";import{s as Ye,a as ue}from"../chunks/DcXenzi0.js";import{s as Z}from"../chunks/CIOq__Tp.js";import{g as Ze}from"../chunks/DAgg4psM.js";import{l as et,t as tt}from"../chunks/DxUIFzZ0.js";var at=m('<div class="inline-block bg-gray-400 text-white px-8 py-4 rounded-xl shadow-lg font-semibold text-lg"> </div>'),rt=m('<div class="text-red-600 text-sm mb-4"> </div> <button class="inline-block bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl shadow-lg font-semibold transition-all transform hover:scale-105"> </button>',1),st=m('<a target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-xl shadow-lg font-semibold text-lg transition-all transform hover:scale-105"> </a>'),ot=m('<span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium"> </span>'),lt=m('<a target="_blank" class="flex items-center gap-4 p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all shadow-lg svelte-pbcxxe"><div class="bg-white bg-opacity-20 p-2 rounded-lg"><span class="text-2xl">🌐</span></div> <div class="flex-1"><p class="font-semibold text-lg"> </p> <p class="text-blue-100 text-sm"> </p></div> <span class="text-xl opacity-75"> </span></a>'),nt=m('<a target="_blank" class="flex items-center gap-3 p-3 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors svelte-pbcxxe"><span class="text-xl">📞</span> <div><p class="font-medium"> </p> <p class="text-sm opacity-75"> </p></div> <span class="ml-auto text-xs svelte-pbcxxe"> </span></a>'),it=m('<a target="_blank" class="flex items-center gap-3 p-3 bg-pink-50 text-pink-700 rounded-lg hover:bg-pink-100 transition-colors svelte-pbcxxe"><span class="text-xl">📸</span> <div><p class="font-medium"> </p> <p class="text-sm opacity-75"> </p></div> <span class="ml-auto text-xs svelte-pbcxxe"> </span></a>'),vt=m('<a target="_blank" class="flex items-center gap-3 p-3 bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100 transition-colors svelte-pbcxxe"><span class="text-xl">👻</span> <div><p class="font-medium"> </p> <p class="text-sm opacity-75"> </p></div> <span class="ml-auto text-xs svelte-pbcxxe"> </span></a>'),pt=m('<p><span class="font-medium"> </span> </p>'),dt=m('<p><span class="font-medium"> </span> <a class="text-blue-600 hover:underline"> </a></p>'),xt=m('<div class="space-y-2 text-sm text-gray-600 bg-white p-3 rounded-lg border"><!> <!></div>'),ct=m('<div class="border-t border-gray-100 bg-gradient-to-br from-gray-50 to-blue-50"><div class="p-6 grid grid-cols-1 lg:grid-cols-2 gap-8"><div class="space-y-4"><h4 class="font-bold text-lg text-gray-800 mb-4 flex items-center gap-2 svelte-pbcxxe"><span class="text-xl">🔗</span> <span> </span></h4> <!> <!> <!> <!></div> <div class="space-y-4"><h4 class="font-medium text-gray-800 mb-3"> </h4> <!></div></div></div>'),_t=m('<div class="border border-gray-200 rounded-2xl overflow-hidden hover:shadow-xl transition-all bg-white group"><button class="w-full p-4 text-left hover:bg-gray-50 flex items-center justify-between transition-colors svelte-pbcxxe"><div class="flex items-center gap-3 svelte-pbcxxe"><span class="text-2xl">🏬</span> <div><h3 class="font-bold text-xl text-gray-900 mb-1"> </h3> <p class="text-sm text-gray-600 flex items-center gap-2 svelte-pbcxxe"><span class="text-red-500">📍</span> <span> </span></p></div></div> <div class="flex items-center gap-3 svelte-pbcxxe"><!> <div class="bg-gray-100 group-hover:bg-blue-100 p-2 rounded-full transition-all duration-300"><span> </span></div></div></button> <!></div>'),gt=m('<div class="mb-8"><h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3 svelte-pbcxxe"><span class="text-3xl">📍</span> <span> </span></h2> <div class="space-y-4"></div></div>'),mt=m('<div><div class="max-w-5xl mx-auto bg-white rounded-xl shadow-lg p-6"><div class="text-center mb-8"><div class="logo-container svelte-pbcxxe"><img src="/logo.png" alt="Urban Market Logo" class="logo-image svelte-pbcxxe"/></div></div> <div class="text-center mb-10 p-6 bg-green-50 rounded-xl border border-green-200"><h2 class="text-lg font-semibold text-gray-800 mb-3"> </h2> <!></div> <!></div></div>');function Lt(fe,be){Ke(be,!1);const[ee,he]=Ye(),L=()=>ue(et,"$language",ee),x=()=>ue(tt,"$t",ee);let M=j([]),G=j(null),T=j("https://wa.me/966112345678"),U=j(!0),z=j("");async function ye(){try{const{data:l,error:f}=await Z.from("branches").select("*").order("name");if(f){console.error("Error loading branches:",f),w(M,[]);return}l&&l.length>0?(w(M,l),console.log("Branches loaded from database:",l.length,"branches")):w(M,[])}catch(l){console.error("Error loading branches:",l),w(M,[])}}async function D(){try{w(U,!0),w(z,""),w(T,await Ze()),console.log("✅ WhatsApp link loaded:",a(T))}catch(l){console.error("Error loading WhatsApp link:",l),w(z,`Failed to load support settings: ${l.message}`)}finally{w(U,!1)}}function we(){return Z.channel("global_settings_changes").on("postgres_changes",{event:"*",schema:"public",table:"global_settings",filter:"setting_key=eq.whatsapp_support_link"},()=>{setTimeout(()=>{D()},500)}).subscribe()}Je(()=>{D(),ye();const l=we();return()=>{Z.removeChannel(l)}}),Xe();var F=mt();let te;var ae=t(F),J=s(t(ae),2),K=t(J),ke=t(K,!0);e(K);var $e=s(K,2);{var Ce=l=>{var f=at(),W=t(f);e(f),u(()=>o(W,`⏳ ${x().loading??""}`)),c(l,f)},Be=l=>{var f=Pe(),W=_e(f);{var N=k=>{var $=rt(),r=_e($),H=t(r,!0);e(r);var B=s(r,2),I=t(B);e(B),u(()=>{o(H,a(z)),o(I,`🔄 ${x().retry??""}`)}),ge("click",B,D),c(k,$)},O=k=>{var $=st(),r=t($);e($),u(()=>{q($,"href",a(T)),o(r,`💬 ${x().chatWithAI??""}`)}),c(k,$)};h(W,k=>{a(z)?k(N):k(O,!1)},!0)}c(l,f)};h($e,l=>{a(U)?l(Ce):l(Be,!1)})}e(J);var We=s(J,2);{var Ae=l=>{var f=gt(),W=t(f),N=s(t(W),2),O=t(N,!0);e(N),e(W);var k=s(W,2);Qe(k,5,()=>a(M),Ve,($,r)=>{var H=_t(),B=t(H),I=t(B),re=s(t(I),2),P=t(re),Ee=t(P,!0);e(P);var se=s(P,2),oe=s(t(se),2),Le=t(oe,!0);e(oe),e(se),e(re),e(I);var le=s(I,2),ne=t(le);{var Me=A=>{var E=ot(),R=t(E,!0);e(E),u(()=>o(R,x().open)),c(A,E)};h(ne,A=>{a(G)===a(r)&&A(Me)})}var ie=s(ne,2),Q=t(ie),qe=t(Q,!0);e(Q),e(ie),e(le),e(B);var Ge=s(B,2);{var He=A=>{var E=ct(),R=t(E),V=t(R),X=t(V),ve=s(t(X),2),Ie=t(ve,!0);e(ve),e(X);var pe=s(X,2);{var Se=i=>{var n=lt(),p=s(t(n),2),d=t(p),C=t(d,!0);e(d);var b=s(d,2),_=t(b,!0);e(b),e(p);var v=s(p,2),g=t(v,!0);e(v),e(n),u(y=>{q(n,"href",a(r).website||a(r).website_url),o(C,x().visitWebsite),o(_,y),o(g,L()==="ar"?"↙️":"↗️")},[()=>(a(r).website||a(r).website_url).replace(/^https?:\/\//,"")]),c(i,n)};h(pe,i=>{(a(r).website||a(r).website_url)&&i(Se)})}var de=s(pe,2);{var je=i=>{var n=nt(),p=s(t(n),2),d=t(p),C=t(d,!0);e(d);var b=s(d,2),_=t(b,!0);e(b),e(p);var v=s(p,2),g=t(v,!0);e(v),e(n),u(y=>{q(n,"href",y),o(C,x().whatsappContact),o(_,a(r).contact_phone||a(r).phone),o(g,L()==="ar"?"↙️":"↗️")},[()=>`https://wa.me/${(a(r).contact_phone||a(r).phone).replace(/[^\d]/g,"")}`]),c(i,n)};h(de,i=>{(a(r).contact_phone||a(r).phone)&&i(je)})}var xe=s(de,2);{var ze=i=>{var n=it(),p=s(t(n),2),d=t(p),C=t(d,!0);e(d);var b=s(d,2),_=t(b);e(b),e(p);var v=s(p,2),g=t(v,!0);e(v),e(n),u(y=>{q(n,"href",a(r).instagram||a(r).instagram_url),o(C,x().instagram),o(_,`@${y??""}`),o(g,L()==="ar"?"↙️":"↗️")},[()=>((a(r).instagram||a(r).instagram_url).split("/").pop()||"").replace("@","")]),c(i,n)};h(xe,i=>{(a(r).instagram||a(r).instagram_url)&&i(ze)})}var Fe=s(xe,2);{var Ne=i=>{var n=vt(),p=s(t(n),2),d=t(p),C=t(d,!0);e(d);var b=s(d,2),_=t(b);e(b),e(p);var v=s(p,2),g=t(v,!0);e(v),e(n),u(y=>{q(n,"href",a(r).snap||a(r).snap_url),o(C,x().snapchat),o(_,`@${y??""}`),o(g,L()==="ar"?"↙️":"↗️")},[()=>((a(r).snap||a(r).snap_url).split("/").pop()||"").replace("@","")]),c(i,n)};h(Fe,i=>{(a(r).snap||a(r).snap_url)&&i(Ne)})}e(V);var ce=s(V,2),Y=t(ce),Re=t(Y);e(Y);var Te=s(Y,2);{var Ue=i=>{var n=xt(),p=t(n);{var d=_=>{var v=pt(),g=t(v),y=t(g);e(g);var S=s(g);e(v),u(()=>{o(y,`${x().branchCode??""}:`),o(S,` ${a(r).code??""}`)}),c(_,v)};h(p,_=>{a(r).code&&_(d)})}var C=s(p,2);{var b=_=>{var v=dt(),g=t(v),y=t(g);e(g);var S=s(g,2),De=t(S,!0);e(S),e(v),u(()=>{o(y,`${x().email??""}:`),q(S,"href",`mailto:${a(r).email}`),o(De,a(r).email)}),c(_,v)};h(C,_=>{a(r).email&&_(b)})}e(n),c(i,n)};h(Te,i=>{(a(r).code||a(r).email)&&i(Ue)})}e(ce),e(R),e(E),u(()=>{o(Ie,x().quickContact),o(Re,`📄 ${x().resources??""}`)}),c(A,E)};h(Ge,A=>{a(G)===a(r)&&A(He)})}e(H),u(()=>{o(Ee,a(r).name||a(r).name_ar||x().unnamedBranch),o(Le,a(r).address||x().locationNotSpecified),me(Q,1,`text-2xl transition-transform duration-300 ${a(G)===a(r)?"rotate-90 text-blue-600":"text-gray-500"}`),o(qe,L()==="ar"?"⬅️":"➡️")}),ge("click",B,()=>w(G,a(G)===a(r)?null:a(r))),c($,H)}),e(k),e(f),u(()=>o(O,x().branchContactInfo)),c(l,f)};h(We,l=>{a(M).length>0&&l(Ae)})}e(ae),e(F),u(l=>{te=me(F,1,"min-h-screen bg-gray-100 py-10 px-4 font-[Montserrat] svelte-pbcxxe",null,te,l),o(ke,x().needHelp)},[()=>({rtl:L()==="ar"})]),c(fe,F),Oe(),he()}export{Lt as component};
