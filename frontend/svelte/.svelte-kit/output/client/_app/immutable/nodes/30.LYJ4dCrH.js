import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as Ts}from"../chunks/Y1pQyyvi.js";import{l as qs,q as Re,r as Bs,m as C,J as Js,t as A,x as d,a as e,n as y,o as Os,y as D,$ as Vs,w as o,v as t,s as r,z as s,E as oe,u as i,B as v,H as js,C as Gs,F as R,b as ce,K as Hs}from"../chunks/Ck91ypkQ.js";import{i as Y}from"../chunks/RujGBxXx.js";import{e as ie,i as de}from"../chunks/D775oJua.js";import{r as he,s as Ce}from"../chunks/DvH4tfbe.js";import{s as Te}from"../chunks/B38bOHRo.js";import{a as qe}from"../chunks/C4HntxLm.js";import{i as Ks}from"../chunks/6tn_K0LM.js";import{s as Ws,a as ps}from"../chunks/DcXenzi0.js";import"../chunks/qrUVQqOk.js";import{a as Qs,b as Xs,l as Ys,c as Zs}from"../chunks/BPlerCut.js";var et=C('<div role="button" tabindex="0"><div class="role-header svelte-z5khzo"><h3 class="svelte-z5khzo"> </h3></div> <p class="role-description svelte-z5khzo"> </p> <div class="role-stats svelte-z5khzo"><span class="permission-count svelte-z5khzo"> </span> <span> </span></div> <div class="role-actions svelte-z5khzo"><button class="action-btn edit-btn svelte-z5khzo" title="Edit Role">✏️</button> <button class="action-btn delete-btn svelte-z5khzo" title="Delete Role">🗑️</button> <button class="action-btn duplicate-btn svelte-z5khzo" title="Duplicate Role">📋</button></div></div>'),st=C('<div class="empty-state svelte-z5khzo"><span class="empty-icon svelte-z5khzo">📝</span> <h3 class="svelte-z5khzo">No roles found</h3> <p class="svelte-z5khzo">Create your first role to get started</p></div>'),tt=C('<div class="permission-tag svelte-z5khzo"><span class="permission-name svelte-z5khzo"> </span></div>'),at=C('<div class="category-section svelte-z5khzo"><h4 class="category-title svelte-z5khzo"> <span class="category-count svelte-z5khzo"> </span></h4> <div class="permissions-grid-small svelte-z5khzo"></div></div>'),ot=C('<div class="info-item svelte-z5khzo"><span class="info-label svelte-z5khzo">Last Updated:</span> <span> </span></div>'),it=C('<div class="role-details svelte-z5khzo"><div class="details-header svelte-z5khzo"><div><h2 class="svelte-z5khzo"> </h2> <span class="permission-summary svelte-z5khzo"> </span></div> <div class="header-actions svelte-z5khzo"><button class="btn btn-secondary svelte-z5khzo">✏️ Edit Role</button> <button class="btn btn-danger svelte-z5khzo">🗑️ Delete Role</button></div></div> <div class="details-content svelte-z5khzo"><div class="detail-section svelte-z5khzo"><h3 class="svelte-z5khzo">Description</h3> <p> </p></div> <div class="detail-section svelte-z5khzo"><h3 class="svelte-z5khzo">Functions by Category</h3> <!></div> <div class="detail-section svelte-z5khzo"><h3 class="svelte-z5khzo">Role Information</h3> <div class="info-grid svelte-z5khzo"><div class="info-item svelte-z5khzo"><span class="info-label svelte-z5khzo">Status:</span> <span> </span></div> <div class="info-item svelte-z5khzo"><span class="info-label svelte-z5khzo">Created:</span> <span> </span></div> <!></div></div></div></div>'),nt=C('<div class="no-selection svelte-z5khzo"><div class="no-selection-content svelte-z5khzo"><span class="no-selection-icon svelte-z5khzo">👥</span> <h3 class="svelte-z5khzo">Select a role to view details</h3> <p class="svelte-z5khzo">Choose a role from the list to view its functions and settings.</p> <p class="help-text svelte-z5khzo"> </p></div></div>'),lt=C('<div class="permission-checkbox svelte-z5khzo"><label class="checkbox-label svelte-z5khzo"><input type="checkbox" class="svelte-z5khzo"/> <span class="checkbox-custom svelte-z5khzo"></span> <div class="permission-info svelte-z5khzo"><span class="permission-title svelte-z5khzo"> </span> <span class="permission-desc svelte-z5khzo"> </span></div></label></div>'),rt=C('<div class="category-group svelte-z5khzo"><div class="category-header svelte-z5khzo"><label class="category-toggle svelte-z5khzo"><input type="checkbox" class="svelte-z5khzo"/> <span class="category-title svelte-z5khzo"> </span></label></div> <div class="category-permissions svelte-z5khzo"></div></div>'),vt=C('<div class="modal-overlay svelte-z5khzo" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-content modal-large svelte-z5khzo" role="document"><div class="modal-header svelte-z5khzo"><h2 class="svelte-z5khzo">Create New Role</h2> <button class="close-btn svelte-z5khzo" aria-label="Close modal">✕</button></div> <div class="modal-body svelte-z5khzo"><div class="form-group svelte-z5khzo"><label for="roleName" class="svelte-z5khzo">Role Name *</label> <input id="roleName" type="text" placeholder="Enter role name" class="form-input svelte-z5khzo"/></div> <div class="form-group svelte-z5khzo"><label for="roleDescription" class="svelte-z5khzo">Description *</label> <textarea id="roleDescription" placeholder="Enter role description" class="form-textarea svelte-z5khzo" rows="3"></textarea></div> <div class="form-group svelte-z5khzo"><div class="permissions-header svelte-z5khzo"><span class="permissions-label svelte-z5khzo">Functions & Permissions</span> <div class="bulk-actions svelte-z5khzo"><button type="button" class="btn-link svelte-z5khzo">Select All</button> <button type="button" class="btn-link svelte-z5khzo">Deselect All</button></div></div> <div class="permissions-container svelte-z5khzo"></div></div></div> <div class="modal-footer svelte-z5khzo"><button class="btn btn-secondary svelte-z5khzo">Cancel</button> <button class="btn btn-primary svelte-z5khzo"> </button></div></div></div>'),ct=C("<option> </option>"),dt=C('<div class="function-row svelte-z5khzo"><div class="function-info svelte-z5khzo"><span class="func-name svelte-z5khzo"> </span> <span class="func-desc svelte-z5khzo"> </span></div> <div class="function-toggle svelte-z5khzo"><label class="toggle-switch svelte-z5khzo"><input type="checkbox" class="svelte-z5khzo"/> <span class="toggle-slider svelte-z5khzo"></span></label></div></div>'),pt=C('<div class="category-section svelte-z5khzo"><div class="category-header svelte-z5khzo"><label class="category-toggle svelte-z5khzo"><input type="checkbox" class="svelte-z5khzo"/> <span class="category-title svelte-z5khzo"> </span></label></div> <div class="functions-table svelte-z5khzo"></div></div>'),zt=C('<div class="user-permissions"><div class="user-info-header svelte-z5khzo"><h3 class="svelte-z5khzo"> </h3> <div class="bulk-actions svelte-z5khzo"><button type="button" class="btn-link svelte-z5khzo">Enable All</button> <button type="button" class="btn-link svelte-z5khzo">Disable All</button></div></div> <p class="user-info svelte-z5khzo">Current Role: <span class="current-role svelte-z5khzo"> </span></p> <div class="functions-by-category svelte-z5khzo"></div></div>'),mt=C('<button class="btn btn-success svelte-z5khzo"> </button>'),ht=C('<div class="modal-overlay svelte-z5khzo" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-content modal-large svelte-z5khzo" role="document"><div class="modal-header svelte-z5khzo"><h2 class="svelte-z5khzo">Assign User Roles</h2> <button class="close-btn svelte-z5khzo" aria-label="Close modal">✕</button></div> <div class="modal-body svelte-z5khzo"><div class="user-selection svelte-z5khzo"><label for="userSelect">Select User</label> <select id="userSelect" class="form-select svelte-z5khzo"><option>Choose a user...</option><!></select></div> <!></div> <div class="modal-footer svelte-z5khzo"><button class="btn btn-secondary svelte-z5khzo">Cancel</button> <!></div></div></div>'),ut=C('<div class="user-roles-container svelte-z5khzo"><div class="page-header svelte-z5khzo"><div class="header-content svelte-z5khzo"><h1 class="svelte-z5khzo">Manage User Roles</h1> <p class="svelte-z5khzo">Configure user roles and permissions for complete admin panel access</p> <div class="stats-row svelte-z5khzo"><span class="stat-item svelte-z5khzo"><strong class="svelte-z5khzo"> </strong> Total Functions</span> <span class="stat-item svelte-z5khzo"><strong class="svelte-z5khzo"> </strong> Manageable Roles</span> <span class="stat-item svelte-z5khzo"><strong class="svelte-z5khzo"> </strong> Users</span></div></div> <div class="header-actions svelte-z5khzo"><button class="btn btn-primary svelte-z5khzo">➕ Create New Role</button> <button class="btn btn-secondary svelte-z5khzo">👤 Assign User Roles</button> <button class="btn btn-outline svelte-z5khzo">📤 Export Roles</button></div></div> <!> <div class="content-grid svelte-z5khzo"><div class="roles-panel svelte-z5khzo"><div class="panel-header svelte-z5khzo"><h2 class="svelte-z5khzo"> </h2> <div class="search-box svelte-z5khzo"><input type="text" placeholder="Search roles..." class="search-input svelte-z5khzo"/> <span class="search-icon svelte-z5khzo">🔍</span></div></div> <div class="roles-list svelte-z5khzo"><!> <!></div></div> <div class="details-panel svelte-z5khzo"><!></div></div> <!> <!></div>');function Mt(zs,ms){qs(ms,!1);const[Be,hs]=Ws(),Je=()=>ps(Qs,"$availableRoles",Be),Oe=()=>ps(Xs,"$availablePermissions",Be),ye=D(),us=D(),Z=D(),ee=D();let z=D(null),q=D(null),ue=D(""),we=D(!1),$e=D(!1),_e=D(""),ge=D(""),g=D([]),m=D([]),pe=D([{id:"1",name:"John Doe",email:"john@example.com",currentRole:"Admin"},{id:"2",name:"Jane Smith",email:"jane@example.com",currentRole:"Manager"},{id:"3",name:"Bob Johnson",email:"bob@example.com",currentRole:"Staff"},{id:"4",name:"Alice Brown",email:"alice@example.com",currentRole:"Viewer"},{id:"5",name:"Mike Wilson",email:"mike@example.com",currentRole:"Operator"},{id:"6",name:"Sarah Davis",email:"sarah@example.com",currentRole:"Support"}]),ne=[{id:"upload-customers",name:"Upload Customers",category:"customer_management",description:"Upload and import customer data"},{id:"upload-transactions",name:"Upload Transactions",category:"financial",description:"Upload and import transaction data"},{id:"customer-management",name:"Customer Management",category:"customer_management",description:"Manage customer profiles and information"},{id:"assign-card-type",name:"Assign Card Type",category:"customer_management",description:"Assign card types to customers"},{id:"extend-validity",name:"Extend Validity",category:"customer_management",description:"Extend card validity periods"},{id:"assign-coupons",name:"Assign Coupons",category:"content_management",description:"Assign coupons to customers"},{id:"manage-card-types",name:"Manage Card Types",category:"system_settings",description:"Create and manage card types"},{id:"manage-branches",name:"Manage Branches",category:"system_settings",description:"Manage branch locations and settings"},{id:"user-management",name:"User Management",category:"user_management",description:"Manage system users and access"},{id:"manage-user-roles",name:"Manage User Roles",category:"user_management",description:"Configure user roles and permissions"},{id:"support-settings",name:"Support Settings",category:"system_settings",description:"Configure customer support settings"},{id:"terms-conditions",name:"Terms & Conditions",category:"content_management",description:"Manage terms and conditions content"},{id:"notification-center",name:"Notification Center",category:"notifications",description:"Manage system notifications"},{id:"export-data",name:"Export Data",category:"analytics",description:"Export system data and reports"},{id:"analytics-reports",name:"Analytics Reports",category:"analytics",description:"View analytics and business reports"},{id:"user-reports",name:"User Reports",category:"analytics",description:"Generate user activity reports"},{id:"password-reset",name:"Password Reset",category:"user_management",description:"Manage password reset functionality"}],xe=["customer_management","user_management","content_management","system_settings","analytics","financial","notifications"];const _s={customer_management:"Customer Management",user_management:"User Management",content_management:"Content Management",system_settings:"System Settings",analytics:"Analytics & Reports",financial:"Financial",notifications:"Notifications"};function Ae(a){return _s[a]||a}Ts(()=>{Ys()});function Ve(a){r(z,a)}function gs(){r(we,!0),r(_e,""),r(ge,""),r(g,[])}function ke(){r(we,!1)}function ks(){r($e,!0),r(q,null),r(m,[])}function be(){r($e,!1),r(q,null)}function bs(a){r(q,a);const n=e(ye).find(l=>l.name===a.currentRole);n?r(m,n.permissions.map(l=>l.id)):r(m,[])}function je(a,n=!1){n?e(m).includes(a)?r(m,e(m).filter(l=>l!==a)):r(m,[...e(m),a]):e(g).includes(a)?r(g,e(g).filter(l=>l!==a)):r(g,[...e(g),a])}function Ge(a,n=!1){const p=e(ee)[a].map(h=>h.id),S=n?e(m):e(g);p.every(h=>S.includes(h))?n?r(m,e(m).filter(h=>!p.includes(h))):r(g,e(g).filter(h=>!p.includes(h))):n?r(m,[...new Set([...e(m),...p])]):r(g,[...new Set([...e(g),...p])])}async function fs(){if(!e(_e).trim()||!e(ge).trim()){alert("Please fill in all required fields");return}const a=ne.filter(l=>e(g).includes(l.id)).map(l=>({id:l.id,name:l.name,description:l.description,category:l.category,resource:l.name,action:"access",isRequired:!1})),n={id:Date.now().toString(),name:e(_e),description:e(ge),permissions:a,isActive:!0,isMasterAdmin:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{await Zs(n),ke(),alert("Role created successfully!")}catch(l){alert("Error creating role: "+(l instanceof Error?l.message:"Unknown error"))}}async function ys(){if(!e(q)){alert("Please select a user");return}ne.filter(a=>e(m).includes(a.id)).map(a=>({id:a.id,name:a.name,description:a.description,category:a.category,resource:a.name,action:"access",isRequired:!1}));try{r(pe,e(pe).map(a=>a.id===e(q).id?{...a,currentRole:"Custom Role"}:a)),be(),alert("User role updated successfully!")}catch(a){alert("Error updating user role: "+(a instanceof Error?a.message:"Unknown error"))}}function He(a=!1){const n=ne.map(l=>l.id);a?r(m,n):r(g,n)}function Ke(a=!1){a?r(m,[]):r(g,[])}Re(()=>Je(),()=>{r(ye,Je())}),Re(()=>Oe(),()=>{r(us,Oe())}),Re(()=>(e(ye),e(ue)),()=>{r(Z,e(ye).filter(a=>!a.isMasterAdmin&&(a.name.toLowerCase().includes(e(ue).toLowerCase())||a.description.toLowerCase().includes(e(ue).toLowerCase()))))}),Re(()=>{},()=>{r(ee,xe.reduce((a,n)=>(a[n]=ne.filter(l=>l.category===n),a),{}))}),Bs(),Ks();var Se=ut();Js(a=>{Vs.title="Manage User Roles - Admin Panel"});var Me=t(Se),De=t(Me),We=o(t(De),4),Ue=t(We),Qe=t(Ue),xs=t(Qe,!0);s(Qe),oe(),s(Ue);var Pe=o(Ue,2),Xe=t(Pe),Rs=t(Xe,!0);s(Xe),oe(),s(Pe);var Ye=o(Pe,2),Ze=t(Ye),Cs=t(Ze,!0);s(Ze),oe(),s(Ye),s(We),s(De);var es=o(De,2),ss=t(es),ws=o(ss,2);oe(2),s(es),s(Me);var ts=o(Me,2);Y(ts,a=>{});var Ee=o(ts,2),Fe=t(Ee),Ne=t(Fe),Le=t(Ne),$s=t(Le);s(Le);var as=o(Le,2),os=t(as);he(os),oe(2),s(as),s(Ne);var is=o(Ne,2),ns=t(is);ie(ns,1,()=>e(Z),a=>a.id,(a,n)=>{var l=et(),p=t(l),S=t(p),N=t(S,!0);s(S),s(p);var h=o(p,2),V=t(h,!0);s(h);var U=o(h,2),L=t(U),H=t(L);s(L);var B=o(L,2),J=t(B,!0);s(B),s(U),oe(2),s(l),A(()=>{Te(l,1,`role-card ${e(z),e(n),i(()=>e(z)?.id===e(n).id?"selected":"")??""}`,"svelte-z5khzo"),v(N,(e(n),i(()=>e(n).name))),v(V,(e(n),i(()=>e(n).description))),v(H,`${e(n),i(()=>e(n).permissions.length)??""} functions`),Te(B,1,`status-badge ${e(n),i(()=>e(n).isActive?"active":"inactive")??""}`,"svelte-z5khzo"),v(J,(e(n),i(()=>e(n).isActive?"Active":"Inactive")))}),d("click",l,()=>Ve(e(n))),d("keydown",l,K=>K.key==="Enter"&&Ve(e(n))),y(a,l)});var As=o(ns,2);{var Ss=a=>{var n=st();y(a,n)};Y(As,a=>{e(Z),i(()=>e(Z).length===0)&&a(Ss)})}s(is),s(Fe);var ls=o(Fe,2),Ms=t(ls);{var Ds=a=>{var n=it(),l=t(n),p=t(l),S=t(p),N=t(S,!0);s(S);var h=o(S,2),V=t(h);s(h),s(p),oe(2),s(l);var U=o(l,2),L=t(U),H=o(t(L),2),B=t(H,!0);s(H),s(L);var J=o(L,2),K=o(t(J),2);ie(K,1,()=>xe,de,(f,w)=>{var G=js();const $=ce(()=>(e(ee),e(w),i(()=>e(ee)[e(w)]))),W=ce(()=>(e(z),i(()=>e(z).permissions.map(_=>_.id)))),E=ce(()=>(R(e($)),R(e(W)),i(()=>e($).filter(_=>e(W).includes(_.id)))));var te=Gs(G);{var x=_=>{var O=at(),Q=t(O),F=t(Q),ae=o(F),re=t(ae);s(ae),s(Q);var ve=o(Q,2);ie(ve,5,()=>e(E),de,(I,T)=>{var X=tt(),me=t(X),fe=t(me,!0);s(me),s(X),A(()=>v(fe,(e(T),i(()=>e(T).name)))),y(I,X)}),s(ve),s(O),A(I=>{v(F,`${I??""} `),v(re,`(${R(e(E)),i(()=>e(E).length)??""}/${R(e($)),i(()=>e($).length)??""})`)},[()=>(e(w),i(()=>Ae(e(w))))]),y(_,O)};Y(te,_=>{R(e(E)),i(()=>e(E).length>0)&&_(x)})}y(f,G)}),s(J);var ze=o(J,2),le=o(t(ze),2),u=t(le),c=o(t(u),2),k=t(c,!0);s(c),s(u);var M=o(u,2),b=o(t(M),2),j=t(b,!0);s(b),s(M);var se=o(M,2);{var P=f=>{var w=ot(),G=o(t(w),2),$=t(G,!0);s(G),s(w),A(W=>v($,W),[()=>(e(z),i(()=>new Date(e(z).updatedAt).toLocaleDateString()))]),y(f,w)};Y(se,f=>{e(z),i(()=>e(z).updatedAt)&&f(P)})}s(le),s(ze),s(U),s(n),A(f=>{v(N,(e(z),i(()=>e(z).name))),v(V,`${e(z),i(()=>e(z).permissions.length)??""} of ${i(()=>ne.length)??""} functions enabled`),v(B,(e(z),i(()=>e(z).description))),Te(c,1,`status-badge ${e(z),i(()=>e(z).isActive?"active":"inactive")??""}`,"svelte-z5khzo"),v(k,(e(z),i(()=>e(z).isActive?"Active":"Inactive"))),v(j,f)},[()=>(e(z),i(()=>new Date(e(z).createdAt).toLocaleDateString()))]),y(a,n)},Us=a=>{var n=nt(),l=t(n),p=o(t(l),6),S=t(p);s(p),s(l),s(n),A(()=>v(S,`Master Administrator role has access to all ${i(()=>ne.length)??""} functions automatically.`)),y(a,n)};Y(Ms,a=>{e(z)?a(Ds):a(Us,!1)})}s(ls),s(Ee);var rs=o(Ee,2);{var Ps=a=>{var n=vt(),l=t(n),p=t(l),S=o(t(p),2);s(p);var N=o(p,2),h=t(N),V=o(t(h),2);he(V),s(h);var U=o(h,2),L=o(t(U),2);Hs(L),s(U);var H=o(U,2),B=t(H),J=o(t(B),2),K=t(J),ze=o(K,2);s(J),s(B);var le=o(B,2);ie(le,5,()=>xe,de,(b,j)=>{var se=rt();const P=ce(()=>(e(ee),e(j),i(()=>e(ee)[e(j)]))),f=ce(()=>(R(e(P)),e(g),i(()=>e(P).filter(x=>e(g).includes(x.id)).length)));var w=t(se),G=t(w),$=t(G);he($);var W=o($,2),E=t(W);s(W),s(G),s(w);var te=o(w,2);ie(te,5,()=>e(P),de,(x,_)=>{var O=lt(),Q=t(O),F=t(Q);he(F);var ae=o(F,4),re=t(ae),ve=t(re,!0);s(re);var I=o(re,2),T=t(I,!0);s(I),s(ae),s(Q),s(O),A(X=>{Ce(F,X),v(ve,(e(_),i(()=>e(_).name))),v(T,(e(_),i(()=>e(_).description)))},[()=>(e(g),e(_),i(()=>e(g).includes(e(_).id)))]),d("change",F,()=>je(e(_).id)),y(x,O)}),s(te),s(se),A(x=>{Ce($,(R(e(f)),R(e(P)),i(()=>e(f)===e(P).length))),$.indeterminate=(R(e(f)),R(e(P)),i(()=>e(f)>0&&e(f)<e(P).length)),v(E,`${x??""} (${e(f)??""}/${R(e(P)),i(()=>e(P).length)??""})`)},[()=>(e(j),i(()=>Ae(e(j))))]),d("change",$,()=>Ge(e(j))),y(b,se)}),s(le),s(H),s(N);var u=o(N,2),c=t(u),k=o(c,2),M=t(k);s(k),s(u),s(l),s(n),A(()=>v(M,`Create Role (${e(g),i(()=>e(g).length)??""} functions)`)),d("click",S,ke),qe(V,()=>e(_e),b=>r(_e,b)),qe(L,()=>e(ge),b=>r(ge,b)),d("click",K,()=>He()),d("click",ze,()=>Ke()),d("click",c,ke),d("click",k,fs),d("click",l,b=>b.stopPropagation()),d("click",n,ke),d("keydown",n,b=>b.key==="Escape"&&ke()),y(a,n)};Y(rs,a=>{e(we)&&a(Ps)})}var Es=o(rs,2);{var Fs=a=>{var n=ht(),l=t(n),p=t(l),S=o(t(p),2);s(p);var N=o(p,2),h=t(N),V=o(t(h),2),U=t(V);U.value=U.__value="";var L=o(U);ie(L,1,()=>e(pe),de,(u,c)=>{var k=ct(),M=t(k);s(k);var b={};A(()=>{v(M,`${e(c),i(()=>e(c).name)??""} (${e(c),i(()=>e(c).email)??""}) - Current: ${e(c),i(()=>e(c).currentRole)??""}`),b!==(b=(e(c),i(()=>e(c).id)))&&(k.value=(k.__value=(e(c),i(()=>e(c).id)))??"")}),y(u,k)}),s(V),s(h);var H=o(h,2);{var B=u=>{var c=zt(),k=t(c),M=t(k),b=t(M);s(M);var j=o(M,2),se=t(j),P=o(se,2);s(j),s(k);var f=o(k,2),w=o(t(f)),G=t(w,!0);s(w),s(f);var $=o(f,2);ie($,5,()=>xe,de,(W,E)=>{var te=pt();const x=ce(()=>(e(ee),e(E),i(()=>e(ee)[e(E)]))),_=ce(()=>(R(e(x)),e(m),i(()=>e(x).filter(I=>e(m).includes(I.id)).length)));var O=t(te),Q=t(O),F=t(Q);he(F);var ae=o(F,2),re=t(ae);s(ae),s(Q),s(O);var ve=o(O,2);ie(ve,5,()=>e(x),de,(I,T)=>{var X=dt(),me=t(X),fe=t(me),Ns=t(fe,!0);s(fe);var vs=o(fe,2),Ls=t(vs,!0);s(vs),s(me);var cs=o(me,2),ds=t(cs),Ie=t(ds);he(Ie),oe(2),s(ds),s(cs),s(X),A(Is=>{v(Ns,(e(T),i(()=>e(T).name))),v(Ls,(e(T),i(()=>e(T).description))),Ce(Ie,Is)},[()=>(e(m),e(T),i(()=>e(m).includes(e(T).id)))]),d("change",Ie,()=>je(e(T).id,!0)),y(I,X)}),s(ve),s(te),A(I=>{Ce(F,(R(e(_)),R(e(x)),i(()=>e(_)===e(x).length))),F.indeterminate=(R(e(_)),R(e(x)),i(()=>e(_)>0&&e(_)<e(x).length)),v(re,`${I??""} (${e(_)??""}/${R(e(x)),i(()=>e(x).length)??""})`)},[()=>(e(E),i(()=>Ae(e(E))))]),d("change",F,()=>Ge(e(E),!0)),y(W,te)}),s($),s(c),A(()=>{v(b,`Functions for ${e(q),i(()=>e(q).name)??""}`),v(G,(e(q),i(()=>e(q).currentRole)))}),d("click",se,()=>He(!0)),d("click",P,()=>Ke(!0)),y(u,c)};Y(H,u=>{e(q)&&u(B)})}s(N);var J=o(N,2),K=t(J),ze=o(K,2);{var le=u=>{var c=mt(),k=t(c);s(c),A(()=>v(k,`💾 Save User Permissions (${e(m),i(()=>e(m).length)??""} functions)`)),d("click",c,ys),y(u,c)};Y(ze,u=>{e(q)&&u(le)})}s(J),s(l),s(n),d("click",S,be),d("change",V,u=>{const k=u.target.value,M=e(pe).find(b=>b.id===k);M&&bs(M)}),d("click",K,be),d("click",l,u=>u.stopPropagation()),d("click",n,be),d("keydown",n,u=>u.key==="Escape"&&be()),y(a,n)};Y(Es,a=>{e($e)&&a(Fs)})}s(Se),A(()=>{v(xs,i(()=>ne.length)),v(Rs,(e(Z),i(()=>e(Z).length))),v(Cs,(e(pe),i(()=>e(pe).length))),v($s,`Manageable Roles (${e(Z),i(()=>e(Z).length)??""})`)}),d("click",ss,gs),d("click",ws,ks),qe(os,()=>e(ue),a=>r(ue,a)),y(zs,Se),Os(),hs()}export{Mt as component};
