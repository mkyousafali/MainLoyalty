# ðŸ”‘ Environment Setup for Google Drive Integration

## ðŸ“‹ Required Environment Variables

Add these to your `.env` file:

```bash
# Google Drive API Credentials (from Service Account JSON)
GOOGLE_SERVICE_ACCOUNT_EMAIL=your-service-account@your-project.iam.gserviceaccount.com
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
GOOGLE_PROJECT_ID=your-google-cloud-project-id

# Your Google Drive Folder IDs
THUMBNAIL_FOLDER_ID=1XARIP5wQM4AegrAEP7oenz3ac7ZDGT2z  # For thumbnail images
PDF_FOLDER_ID=1B8Zz52x-bR31ZiW5bZowQAU06RVq4J-e        # For PDF documents
```

## ðŸš€ Quick Setup Steps

### 1. Create Google Cloud Project
- Go to: https://console.cloud.google.com/
- Create new project: "MainLoyalty-Drive"

### 2. Enable Google Drive API  
- Navigate to: APIs & Services â†’ Library
- Search: "Google Drive API"
- Click: Enable

### 3. Create Service Account
- Go to: APIs & Services â†’ Credentials  
- Click: Create Credentials â†’ Service Account
- Name: "loyalty-drive-uploader"
- Click: Create and Continue â†’ Done

### 4. Generate Service Account Key
- Click on the created service account
- Go to: Keys tab
- Click: Add Key â†’ Create New Key â†’ JSON
- Download and save the JSON file securely

### 5. Extract Credentials from JSON
From your downloaded JSON file, copy these values:
```json
{
  "client_email": "loyalty-drive-uploader@your-project.iam.gserviceaccount.com",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...",
  "project_id": "your-project-id"
}
```

### 6. Share Google Drive Folders
- Open your Google Drive folders:
  - Thumbnails: https://drive.google.com/drive/folders/1XARIP5wQM4AegrAEP7oenz3ac7ZDGT2z
  - PDFs: https://drive.google.com/drive/folders/1B8Zz52x-bR31ZiW5bZowQAU06RVq4J-e
- Right-click each folder â†’ Share
- Add your service account email (from step 5)
- Set permission: Editor
- Click: Send

### 7. Install Dependencies
```bash
npm install googleapis multer
# or
yarn add googleapis multer
```

### 8. Test Upload
- Start your server
- Try uploading a file through the admin panel
- Check your Google Drive folders for the uploaded files

## ðŸ”§ Troubleshooting

### Error: "Access denied"
- Check if service account email is added to both folders
- Verify service account has "Editor" permissions

### Error: "Invalid credentials"  
- Check if GOOGLE_PRIVATE_KEY includes proper line breaks (`\n`)
- Verify all environment variables are set correctly

### Error: "API not enabled"
- Make sure Google Drive API is enabled in Google Cloud Console
- Wait a few minutes after enabling for it to propagate

### Files not appearing in Drive
- Check if folders are shared with service account
- Verify folder IDs are correct

## âœ… Success Indicators

When working correctly, you should see:
- Console logs showing upload progress
- Files appearing in your Google Drive folders
- Generated URLs working when clicked
- Real-time progress bars in the admin panel

Your real Google Drive integration is now ready! ðŸŽ¯
